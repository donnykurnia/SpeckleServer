{"remainingRequest":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/components/UserSearch.vue?vue&type=style&index=0&id=9b372448&scoped=true&lang=scss&","dependencies":[{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/components/UserSearch.vue","mtime":1609071089417},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.hovered {\n  cursor: pointer;\n}\n",{"version":3,"sources":["UserSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA","file":"UserSearch.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-layout align-center row wrap>\n    <v-flex xs12 class='pb-0'>\n      <v-text-field box label='search for users' clearable v-model='userSearch' flat :loading='searchInProgress' prepend-inner-icon=\"search\" @input='startSearchUsers'></v-text-field>\n    </v-flex>\n    <v-flex xs12 style='margin-top:-30px' class='mb-5' v-if='userSearch!==null && foundUsers.length > 0'>\n      <v-card class='elevation-10'>\n        <v-card-title class='subheading' v-if='userSearch'>Search results ({{foundUsers.length}} users)</v-card-title>\n        <v-divider></v-divider>\n        <v-card-text style='max-height: 410px; overflow-y: auto; overflow-x: hidden;' v-if='foundUsers.length>0'>\n          <v-list two-line xxxv-if='filters.length > 0'>\n            <v-list-tile v-for='user in foundUsers' :key='user._id'>\n              <v-list-tile-content>\n                <v-list-tile-title>\n                  {{user.name}} {{user.surname}}\n                </v-list-tile-title>\n                <v-list-tile-sub-title class='caption'>\n                  <span class='caption'>{{user.company}}</span>\n                </v-list-tile-sub-title>\n              </v-list-tile-content>\n              <v-list-tile-action>\n                <v-btn fab small depressed @click.native='selectUser(user._id)'>\n                  <v-icon>add</v-icon>\n                </v-btn>\n              </v-list-tile-action>\n            </v-list-tile>\n          </v-list>\n        </v-card-text>\n      </v-card>\n    </v-flex>\n  </v-layout>\n</template>\n<script>\nimport debounce from 'lodash.debounce'\nimport Axios from 'axios'\n\nexport default {\n  name: 'UserSearch',\n  props: {\n    msg: String\n  },\n  data( ) {\n    return {\n      userSearch: '',\n      foundUsers: [ ],\n      searchInProgress: false\n    }\n  },\n  watch: {\n    userSearch( newVal, oldVal ) {\n      if ( newVal === '' ) {\n        this.foundUsers = [ ]\n        this.searchInProgress = false\n      }\n    }\n  },\n  methods: {\n    selectUser( userId ) {\n      this.$emit( 'selected-user', userId )\n      let index = this.foundUsers.findIndex( u => u._id === userId )\n      this.foundUsers.splice( index, 1 )\n    },\n    startSearchUsers( ) {\n      this.searchInProgress = true\n      this.searchUsers( this.userSearch )\n    },\n    searchUsers: debounce( function( searchString ) {\n      if ( searchString === '' || searchString === null ) {\n        this.foundUsers = [ ]\n        this.searchInProgress = false\n        return\n      }\n      if ( searchString.length < 3 ) {\n        // TODO: Show an error\n        return\n      }\n      Axios.post( '/accounts/search', { searchString: searchString } )\n        .then( res => {\n          console.log( res )\n          this.foundUsers = res.data.resources\n          // build up a db of users\n          if ( res.data.resources.length > 0 )\n            this.$store.commit( 'ADD_USERS', res.data.resources )\n          this.searchInProgress = false\n        } )\n        .catch( err => {\n          this.foundUsers = [ ]\n          this.searchInProgress = false\n        } )\n    }, 1500 )\n  }\n}\n\n</script>\n<style scoped lang='scss'>\n.hovered {\n  cursor: pointer;\n}\n</style>\n"]}]}