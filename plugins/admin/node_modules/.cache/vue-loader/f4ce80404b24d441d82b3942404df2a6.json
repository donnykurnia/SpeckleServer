{"remainingRequest":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/components/ProjectCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/components/ProjectCard.vue","mtime":1609071089411},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport debounce from 'lodash.debounce'\nimport uniq from 'lodash.uniq'\nimport union from 'lodash.union'\nimport marked from 'marked'\n\nexport default {\n  name: 'ProjectCard',\n  props: {\n    resource: Object\n  },\n  watch: {\n    selected( ) { this.$emit( \"selected\", this.project ) }\n  },\n  computed: {\n    project( ) {\n      return this.resource\n    },\n    projectTeamMembers( ) {\n      return union( this.project.canRead, this.project.canWrite )\n    },\n    createdAt( ) {\n      let date = new Date( this.project.createdAt )\n      return date.toLocaleString( 'en', { year: 'numeric', month: 'long', day: 'numeric' } )\n    },\n    compiledDescription( ) {\n      return marked( this.project.description.substring( 0, 400 ) + ' ...', { sanitize: true } )\n    },\n    canEdit( ) {\n      return this.isOwner ? true : this.project.canWrite.indexOf( this.$store.state.user._id ) !== -1\n    },\n    isOwner( ) {\n      return this.project.owner === this.$store.state.user._id\n    },\n    allUsers( ) {\n      return union( this.project.canRead, this.project.canWrite )\n    },\n    owner( ) {\n      let u = this.$store.state.users.find( user => user._id === this.resource.owner )\n      if ( !u ) {\n        this.$store.dispatch( 'getUser', { _id: this.resource.owner } )\n      }\n      return u ? u.surname.includes( \"is you\" ) ? `you` : `${u.name} ${u.surname}` : 'Loading'\n    }\n  },\n  data( ) {\n    return {\n      selected: false,\n    }\n  },\n  methods: {\n    archiveProject( ) {\n      this.$store.dispatch( 'updateProject', { _id: this.project._id, deleted: true } )\n      // this.$store.dispatch( 'updateStream', { _id: this.project._id, deleted: true } )\n      // this.$emit( 'deleted' )\n    },\n    updateTags: debounce( function( e ) {\n      this.$store.dispatch( 'updateProject', { _id: this.project._id, tags: this.project.tags } )\n    }, 1000 )\n  },\n  mounted( ) {\n    bus.$on( 'select-project', id => {\n      if ( id === this.project._id ) this.selected = true\n    } )\n    bus.$on( 'unselect-all-projects', ( ) => {\n      this.selected = false\n    } )\n  }\n}\n\n",{"version":3,"sources":["ProjectCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProjectCard.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-card :class=\"{'elevation-10':selected, 'elevation-1': true}\">\n    <v-card-title>\n      <span class='title font-weight-light'>{{resource.name ? resource.name : \"No Name\"}}</span>\n      <v-spacer></v-spacer>\n      <span></span>\n      <span>\n        <v-checkbox color='primary' v-model=\"selected\"></v-checkbox>\n      </span>\n    </v-card-title>\n    <v-divider class='mx-0 my-0'></v-divider>\n    <v-layout row wrap>\n      <v-flex xs12 class='caption' ma-2>\n        <v-icon small>import_export</v-icon>&nbsp<strong style=\"user-select:all\">{{project.streams.length}}</strong>&nbsp;\n        <v-icon small>person_outline</v-icon> {{ allUsers.length }} &nbsp;\n        <v-icon small>edit</v-icon>&nbsp;<timeago :datetime='resource.updatedAt'></timeago>&nbsp;\n        <v-icon small>access_time</v-icon>&nbsp; {{createdAt}}&nbsp;\n      </v-flex>\n      <v-flex xs12 ma-2>\n        <v-chip small v-if='resource.jobNumber'><b>JN:</b> {{resource.jobNumber}}</v-chip>\n        <v-chip small outline v-if='resource.tags.length > 0' v-for='tag in resource.tags' :key='tag'>{{tag}}</v-chip>\n      </v-flex>\n      <v-flex xs12 ma-2>\n        <div class=\"md-caption md-small-hide\" v-html='compiledDescription'> </div>\n      </v-flex>\n    </v-layout>\n    <v-card-actions>\n      <span class='caption font-weight-light'>Owned by <strong>{{owner}}</strong></span>\n      <v-spacer></v-spacer>\n      <v-btn depressed class='transparent' @click.native='archiveProject' v-show='isOwner'>Archive</v-btn>\n      <v-btn color='primary' :to='\"/projects/\"+resource._id'>Details</v-btn>\n    </v-card-actions>\n  </v-card>\n</template>\n<script>\nimport debounce from 'lodash.debounce'\nimport uniq from 'lodash.uniq'\nimport union from 'lodash.union'\nimport marked from 'marked'\n\nexport default {\n  name: 'ProjectCard',\n  props: {\n    resource: Object\n  },\n  watch: {\n    selected( ) { this.$emit( \"selected\", this.project ) }\n  },\n  computed: {\n    project( ) {\n      return this.resource\n    },\n    projectTeamMembers( ) {\n      return union( this.project.canRead, this.project.canWrite )\n    },\n    createdAt( ) {\n      let date = new Date( this.project.createdAt )\n      return date.toLocaleString( 'en', { year: 'numeric', month: 'long', day: 'numeric' } )\n    },\n    compiledDescription( ) {\n      return marked( this.project.description.substring( 0, 400 ) + ' ...', { sanitize: true } )\n    },\n    canEdit( ) {\n      return this.isOwner ? true : this.project.canWrite.indexOf( this.$store.state.user._id ) !== -1\n    },\n    isOwner( ) {\n      return this.project.owner === this.$store.state.user._id\n    },\n    allUsers( ) {\n      return union( this.project.canRead, this.project.canWrite )\n    },\n    owner( ) {\n      let u = this.$store.state.users.find( user => user._id === this.resource.owner )\n      if ( !u ) {\n        this.$store.dispatch( 'getUser', { _id: this.resource.owner } )\n      }\n      return u ? u.surname.includes( \"is you\" ) ? `you` : `${u.name} ${u.surname}` : 'Loading'\n    }\n  },\n  data( ) {\n    return {\n      selected: false,\n    }\n  },\n  methods: {\n    archiveProject( ) {\n      this.$store.dispatch( 'updateProject', { _id: this.project._id, deleted: true } )\n      // this.$store.dispatch( 'updateStream', { _id: this.project._id, deleted: true } )\n      // this.$emit( 'deleted' )\n    },\n    updateTags: debounce( function( e ) {\n      this.$store.dispatch( 'updateProject', { _id: this.project._id, tags: this.project.tags } )\n    }, 1000 )\n  },\n  mounted( ) {\n    bus.$on( 'select-project', id => {\n      if ( id === this.project._id ) this.selected = true\n    } )\n    bus.$on( 'unselect-all-projects', ( ) => {\n      this.selected = false\n    } )\n  }\n}\n\n</script>\n<style scoped lang='scss'>\n</style>\n"]}]}