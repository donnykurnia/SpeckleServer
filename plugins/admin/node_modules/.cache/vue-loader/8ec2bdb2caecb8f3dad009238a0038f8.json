{"remainingRequest":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/views/SigninCallback.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/views/SigninCallback.vue","mtime":1609071089434},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Axios from 'axios'\n\nexport default {\n  name: 'SigninViewCallback',\n  components: {},\n  computed: {},\n  watch: {},\n  data( ) {\n    return {\n      server: null,\n      errorMessage: null,\n      showError: false,\n      sslProblem: false\n    }\n  },\n  methods: {},\n  mounted( ) {\n    if ( this.$store.state.isAuth === true ) {\n      return this.$router.push( '/' )\n    }\n\n    let conn = window.decodeURIComponent( this.$route.query.token )\n\n    let jwt = conn.split( ':::' )[ 0 ]\n    let server = localStorage.getItem( '__tempServer' )\n\n    let url = new URL( server )\n    if ( url.protocol !== \"https\" ) {\n      this.sslProblem = true\n    }\n\n    this.$store.dispatch( 'authenticate', { server: server, token: jwt } )\n      .then( ( ) => {\n\n        this.$store.dispatch( 'getStreams', 'omit=objects,layers&isComputedResult=false&sort=updatedAt' )\n        this.$store.dispatch( 'getProjects' )\n        this.$store.dispatch( 'getProcessors' )\n        this.$store.dispatch( 'createClient' )\n\n\n\n        this.$router.push( '/' ) // TODO: Check redirect (?)\n      } )\n      .catch( err => {\n        console.log( err )\n        this.errorMessage = err\n        this.showError = true\n      } )\n  }\n}\n\n",{"version":3,"sources":["SigninCallback.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SigninCallback.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container fluid fill-height>\n    <v-layout align-center justify-center>\n      <v-flex xs11 md6 lg6>\n        <v-card class=\"elevation-3\" v-if='!$store.state.isAuth'>\n          <v-toolbar dense class='title small text-uppercase elevation-0' v-show=\"!showError\">\n            <v-icon small>lock_open</v-icon>&nbsp;<span class='font-weight-light'>Finishing up...</span>\n          </v-toolbar>\n          <v-card-text v-if='!showError'>\n            This shouldn't take long.\n          </v-card-text>\n          <v-card-text v-else class='pt-4'>\n            <p class='headline font-weight-light'><v-icon class='pb-1'>error</v-icon>&nbsp;Oups. Something bad happened :(</p>\n            <p class='caption' v-if='sslProblem'>\n              Your server is not using SSL (i.e, your server url is http and not http<b>s</b>. Please check the community supported <a href='https://discourse.speckle.works/t/speckle-server-debian-9-installation-notes-for-development-machines/344' target=\"_blank\"> server deployment instructions</a>. If still in trouble, don't hesitate to get in touch on <a href=\"https://speckle-works.slack.com/join/shared_invite/enQtNjY5Mzk2NTYxNTA4LTU4MWI5ZjdhMjFmMTIxZDIzOTAzMzRmMTZhY2QxMmM1ZjVmNzJmZGMzMDVlZmJjYWQxYWU0MWJkYmY3N2JjNGI\">slack</a> or <a href=\"https://discourse.speckle.works/\">discourse</a>.</p>\n            <v-btn block to='/signin'>back to signin</v-btn>\n          </v-card-text>\n          <v-card-actions>\n          </v-card-actions>\n          <v-alert v-model=\"showError\" type=\"warning\" dismissible>\n            Specifics:\n            <pre>{{errorMessage}}</pre>\n          </v-alert>\n        </v-card>\n        <v-card v-else>\n          <v-card-text>You are already logged in.</v-card-text>\n        </v-card>\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n<script>\nimport Axios from 'axios'\n\nexport default {\n  name: 'SigninViewCallback',\n  components: {},\n  computed: {},\n  watch: {},\n  data( ) {\n    return {\n      server: null,\n      errorMessage: null,\n      showError: false,\n      sslProblem: false\n    }\n  },\n  methods: {},\n  mounted( ) {\n    if ( this.$store.state.isAuth === true ) {\n      return this.$router.push( '/' )\n    }\n\n    let conn = window.decodeURIComponent( this.$route.query.token )\n\n    let jwt = conn.split( ':::' )[ 0 ]\n    let server = localStorage.getItem( '__tempServer' )\n\n    let url = new URL( server )\n    if ( url.protocol !== \"https\" ) {\n      this.sslProblem = true\n    }\n\n    this.$store.dispatch( 'authenticate', { server: server, token: jwt } )\n      .then( ( ) => {\n\n        this.$store.dispatch( 'getStreams', 'omit=objects,layers&isComputedResult=false&sort=updatedAt' )\n        this.$store.dispatch( 'getProjects' )\n        this.$store.dispatch( 'getProcessors' )\n        this.$store.dispatch( 'createClient' )\n\n\n\n        this.$router.push( '/' ) // TODO: Check redirect (?)\n      } )\n      .catch( err => {\n        console.log( err )\n        this.errorMessage = err\n        this.showError = true\n      } )\n  }\n}\n\n</script>\n<style scoped lang='scss'>\n</style>\n"]}]}