{"remainingRequest":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/thread-loader/dist/cjs.js!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/components/ProcessorBlock.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/components/ProcessorBlock.vue","mtime":1609071089410},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Object$assign from \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@babel/runtime-corejs2/core-js/object/assign\";\nimport _Object$values from \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@babel/runtime-corejs2/core-js/object/values\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _typeof from \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@babel/runtime-corejs2/helpers/esm/typeof\";\nimport _toConsumableArray from \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _Array$isArray from \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@babel/runtime-corejs2/core-js/array/is-array\";\nimport _Object$keys from \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@babel/runtime-corejs2/core-js/object/keys\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport VueJsonPretty from 'vue-json-pretty';\nexport default {\n  name: 'ProcessorBlock',\n  components: {\n    VueJsonPretty: VueJsonPretty\n  },\n  props: {\n    index: null,\n    block: Object,\n    output: null,\n    status: '',\n    params: {}\n  },\n  computed: {\n    isAuthenticated: function isAuthenticated() {\n      // Maybe add other auth methods?\n      if (this.block.msal) {\n        var tokenID = 'msal|' + this.block.msal.clientId;\n        if (this.$store.state.tokens.hasOwnProperty(tokenID)) return true;\n        return false;\n      }\n\n      return true;\n    },\n    customComponent: function customComponent() {\n      var _this = this;\n\n      return function () {\n        return import(\"../store/lambda/component/\".concat(_this.block.function, \".vue\"));\n      };\n    },\n    arrayParams: function arrayParams() {\n      return this.block.parameters.filter(function (p) {\n        return p.type == 'array';\n      });\n    },\n    booleanParams: function booleanParams() {\n      return this.block.parameters.filter(function (p) {\n        return p.type == 'boolean';\n      });\n    },\n    genericParams: function genericParams() {\n      return this.block.parameters.filter(function (p) {\n        return ['string', 'int', 'double'].includes(p.type);\n      });\n    },\n    objectarrayParams: function objectarrayParams() {\n      return this.block.parameters.filter(function (p) {\n        return p.type == 'objectarray';\n      });\n    },\n    numOutput: function numOutput() {\n      if (this.output == null) return 0;\n      if (typeof this.output == 'string') return 1;else return _Object$keys(this.output).length;\n    },\n    responseObject: function responseObject() {\n      if (this.numOutput <= 10) return this.removeArraysRecursive(this.output);else {\n        var bar = {};\n\n        for (var key in this.output) {\n          bar[key] = this.output[key];\n          if (_Object$keys(bar).length >= 10) break;\n        }\n\n        bar['_hidden'] = \"... (\".concat(this.numOutput - 10, \" more objects)\");\n        return this.removeArraysRecursive(bar);\n      }\n    }\n  },\n  data: function data() {\n    return {\n      displayDialog: {},\n      objectArrayItem: {},\n      objectArrayIndex: -1,\n      isAuthenticating: false\n    };\n  },\n  methods: {\n    removeArraysRecursive: function removeArraysRecursive(foo) {\n      var bar = {};\n      if (typeof foo == 'string') return foo;\n\n      for (var key in foo) {\n        if (!foo.hasOwnProperty(key)) continue;\n\n        if (_Array$isArray(foo[key])) {\n          /*DO FUCKALL */\n          if (foo[key].length < 3) bar[key] = foo[key];else {\n            bar[key] = [].concat(_toConsumableArray(foo[key].slice(0, 3)), [\"... (\".concat(foo[key].length - 3, \" more values)\")]);\n          }\n        } else if (_typeof(foo[key]) === 'object' && foo[key] !== null) {\n          bar[key] = this.removeArraysRecursive(foo[key]);\n        } else {\n          bar[key] = foo[key];\n        }\n      }\n\n      return bar;\n    },\n    tableHeader: function tableHeader(headers) {\n      var formatedHeaders = [];\n      headers.forEach(function (h) {\n        formatedHeaders.push({\n          text: h,\n          value: h,\n          sortable: false\n        });\n      });\n      formatedHeaders.push({\n        text: 'actions',\n        value: 'actions',\n        sortable: false\n      });\n      return formatedHeaders;\n    },\n    resetObjectArrayDialog: function resetObjectArrayDialog(param) {\n      this.objectArrayItem = {};\n      this.displayDialog[param.name] = false;\n      this.objectArrayIndex = -1;\n    },\n    addObjectArrayItem: function addObjectArrayItem(param) {\n      if (_Object$values(this.objectArrayItem).length == param.headers.length) {\n        if (!this.params.hasOwnProperty(param.name)) this.params[param.name] = [];\n        if (this.objectArrayIndex == -1) this.params[param.name].push(this.objectArrayItem);else this.params[param.name].splice(this.objectArrayIndex, 1, this.objectArrayItem);\n        this.objectArrayItem = {};\n        this.$emit('update-param', {\n          index: this.index,\n          params: this.params\n        });\n      }\n\n      this.resetObjectArrayDialog(param);\n    },\n    deleteObjectArrayItem: function deleteObjectArrayItem(param, index) {\n      this.params[param.name].splice(index, 1);\n      this.$emit('update-param', {\n        index: this.index,\n        params: this.params\n      });\n    },\n    editObjectArrayItem: function editObjectArrayItem(param, index) {\n      this.objectArrayItem = _Object$assign({}, this.params[param.name][index]);\n      this.objectArrayIndex = index;\n      this.displayDialog[param.name] = true;\n    },\n    updateParams: function updateParams(payload) {\n      this.params = payload;\n      this.$emit('update-param', {\n        index: this.index,\n        params: this.params\n      });\n    },\n    authenticate: function authenticate() {\n      var _this2 = this;\n\n      if (this.isAuthenticated) return;\n      this.isAuthenticating = true;\n      this.$store.dispatch('authenticateBlocks', [this.block]).then(function (res) {\n        _this2.isAuthenticating = false;\n      }).catch(function (err) {\n        console.log(err);\n        _this2.isAuthenticated = false;\n      });\n    }\n  },\n  created: function created() {}\n};",{"version":3,"sources":["ProcessorBlock.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-layout row wrap>\n    <v-flex xs12 ma-0 pa-0>\n      <v-card>\n        <v-card-title>\n          <v-icon small class=\"ml-2 mr-2\">\n            {{block.icon ? block.icon : 'code'}}\n          </v-icon>\n          <span class='font-weight-light mr-2'>\n            {{ block.name }}\n          </span>\n          <v-dialog\n            max-width=\"500\">\n            <template v-slot:activator=\"{ on }\">\n              <v-btn round small depressed color=\"primary\" v-on=\"on\">\n                <span>help</span>\n              </v-btn>\n            </template>\n            <v-card>\n              <v-card-title>\n                <span class='font-weight-light'>Description</span>\n              </v-card-title>\n              <v-card-text>\n                {{ block.description }}\n              </v-card-text>\n            </v-card>\n          </v-dialog>\n          <v-spacer></v-spacer>\n          <span>\n            <v-btn round small depressed color=\"primary\" v-if=\"status == 'success'\" @click=\"$emit('rerun-block', index)\">\n              <v-icon small>replay</v-icon>\n              <span class=\"mx-2\">re-run</span>\n            </v-btn>\n            <v-btn fab small depressed color=\"primary\" @click=\"$emit('remove-block', index)\">\n              <v-icon>close</v-icon>\n            </v-btn>\n          </span>\n        </v-card-title>\n        <v-divider v-if=\"this.block.parameters.length > 0\" class='mx-0 my-0'></v-divider>\n        <div v-if=\"isAuthenticated\">\n          <v-card-text v-if=\"this.block.customComponent\">\n            <component\n              :block='block'\n              :params='params'\n              v-bind:is=\"customComponent\"\n              v-on:update-param=\"updateParams\">\n            </component>\n          </v-card-text>\n          <v-card-text v-else-if=\"this.block.parameters.length > 0 && isAuthenticated\">\n            <v-layout row wrap>\n              <v-flex xs12 sm6 md3 v-for='param in arrayParams' :key='param.name'>\n                <v-combobox multiple small-chips :label='param.name' v-model='params[param.name]' @change=\"$emit('update-param', {index: index, params: params})\">\n                </v-combobox>\n              </v-flex>\n              <v-flex xs12 sm6 md3 v-for='param in genericParams' :key='param.name'>\n                <v-text-field :label='param.name' v-model='params[param.name]' @change=\"$emit('update-param', {index: index, params: params})\">\n                </v-text-field>\n              </v-flex>\n              <v-flex xs12 sm6 md3 v-for='param in booleanParams' :key='param.name'>\n                <v-checkbox :label='param.name' v-model='params[param.name]' @change=\"$emit('update-param', {index: index, params: params})\">\n                </v-checkbox>\n              </v-flex>\n              <v-flex xs12 sm12 md12 v-for='param in objectarrayParams' :key='param.name'>\n                <v-card outlined>\n                  <v-flex>\n                    <span class='font-weight-light mr-3'>{{param.name}}</span>\n                    <v-dialog :persistent='true' v-model=\"displayDialog[param.name]\" max-width='300'>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-btn round small v-on=\"on\">\n                          <v-icon small>add</v-icon>\n                          <span class=\"mx-2\">new entry</span>\n                        </v-btn>\n                      </template>\n                      <v-card>\n                        <v-card-title class='title font-weight-light'>\n                          {{objectArrayIndex == -1 ? 'New Entry' : 'Modify Entry'}}\n                        </v-card-title>\n                        <v-card-text>\n                          <v-layout row wrap>\n                            <v-flex xs12 sm12 md12 v-for='header in param.headers' :key='param.name + \"_\" + header'>\n                              <v-text-field :label='header' v-model='objectArrayItem[header]'>\n                              </v-text-field>\n                            </v-flex>\n                          </v-layout>\n                        </v-card-text>\n                        <v-card-actions>\n                          <v-btn flat color='primary' @click='addObjectArrayItem(param)'>\n                            {{objectArrayIndex == -1 ? 'Add' : 'Modify'}}\n                          </v-btn>\n                          <v-btn flat color='primary' @click='resetObjectArrayDialog(param)'>\n                            Cancel\n                          </v-btn>\n                        </v-card-actions>\n                      </v-card>\n                    </v-dialog>\n                  </v-flex>\n                  <v-data-table disable-initial-sort hide-actions :headers='tableHeader(param.headers)' :items='params[param.name]'>\n                    <template v-slot:items=\"props\">\n                      <td v-for='p in Object.entries(props.item)' :key='p[0]'>{{p[1]}}</td>\n                      <td width='200px'>\n                        <v-btn flat icon small @click=\"deleteObjectArrayItem(param, props.index)\">\n                          <v-icon small>\n                            delete\n                          </v-icon>\n                        </v-btn>\n                        <v-btn flat icon small @click=\"editObjectArrayItem(param, props.index)\">\n                          <v-icon small>\n                            edit\n                          </v-icon>\n                        </v-btn>\n                      </td>\n                    </template>\n                    <template v-slot:no-data>\n                      <td v-for='h in param.headers' :key='h'></td>\n                      <td width='10%'></td>\n                    </template>\n                  </v-data-table>\n                </v-card>\n              </v-flex>\n            </v-layout>\n          </v-card-text>\n        </div>\n        <div v-else>\n          <v-card-text>\n            <v-layout row wrap>\n              <v-flex xs12 class=\"text-xs-center\">\n                <v-btn v-if=\"!isAuthenticating\" @click=\"authenticate()\" round depressed color=\"primary\">\n                  Authenticate\n                </v-btn>\n                <v-progress-circular v-else indeterminate color=\"primary\">\n                </v-progress-circular>\n              </v-flex>\n            </v-layout>\n          </v-card-text>\n        </div>\n        <v-progress-linear\n          color='primary'\n          v-bind:indeterminate=\"this.status == 'running'\">\n        </v-progress-linear>\n      </v-card>\n    </v-flex>\n    <v-flex xs12 ma-0 pa-0 text-xs-center class=\"title font-weight-black\">\n      |\n    </v-flex>\n    <v-flex xs12 mt-0 pa-0 text-xs-center>\n      <v-dialog\n        v-if=\"output != null\"\n        max-width=\"500\">\n        <template v-slot:activator=\"{ on }\">\n          <v-btn round small dark depressed v-on=\"on\" :color=\"status == 'success' ? 'green' : 'red'\">\n            <v-icon class=\"ml-2\" small>{{status == \"success\" ? \"check\" : \"stop\"}}</v-icon>\n            <span class=\"mx-2\">view output</span>\n          </v-btn>\n        </template>\n        <v-card>\n          <v-card-title>\n            <span class='font-weight-light'>\n              {{status == \"error\" ? \"Error\" : \"Response\"}}\n            </span>\n          </v-card-title>\n          <v-card-text>\n            <vue-json-pretty :data='responseObject' :deep='1' highlight-mouseover-node show-length :show-line='false' :show-double-quotes='false'>\n            </vue-json-pretty>\n          </v-card-text>\n        </v-card>\n      </v-dialog>\n      <v-btn v-else round small dark depressed :color=\"status == 'running' ? 'orange' : 'primary'\">\n        <v-icon class=\"ml-2\" small>{{status == \"running\" ? \"timer\" : \"drafts\"}}</v-icon>\n        <span class=\"mx-2\">{{status == \"running\" ? \"waiting\" : \"no output\"}}</span>\n      </v-btn>\n    </v-flex>\n    <v-flex xs12 pa-0 text-xs-center class=\"title font-weight-black\">\n      <v-icon>arrow_downward</v-icon>\n    </v-flex>\n  </v-layout>\n</template>\n<script>\n\nimport VueJsonPretty from 'vue-json-pretty'\n\nexport default {\n  name: 'ProcessorBlock',\n  components: {\n    VueJsonPretty\n  },\n  props: {\n    index: null,\n    block: Object,\n    output: null,\n    status: '',\n    params: { },\n  },\n  computed: {\n    isAuthenticated () {\n      // Maybe add other auth methods?\n      if (this.block.msal)\n      {\n        var tokenID = 'msal|' + this.block.msal.clientId\n        if (this.$store.state.tokens.hasOwnProperty(tokenID))\n          return true\n\n        return false\n      }\n\n      return true\n    },\n    customComponent () {\n      return () => import(`../store/lambda/component/${this.block.function}.vue`)\n    },\n    arrayParams( ) {\n      return this.block.parameters.filter(p => p.type == 'array')\n    },\n    booleanParams( ) {\n      return this.block.parameters.filter(p => p.type == 'boolean')\n    },\n    genericParams( ) {\n      return this.block.parameters.filter(p => ['string', 'int', 'double'].includes(p.type))\n    },\n    objectarrayParams( ) {\n      return this.block.parameters.filter(p => p.type == 'objectarray')\n    },\n    numOutput( ) {\n      if (this.output == null)\n        return 0\n      if (typeof this.output == 'string')\n        return 1\n      else\n        return Object.keys(this.output).length\n    },\n    responseObject() {\n      if (this.numOutput <= 10)\n        return this.removeArraysRecursive( this.output )\n      else\n      {\n        let bar = {}\n        for ( let key in this.output ) {\n          bar[key] = this.output[key]\n\n          if (Object.keys(bar).length >= 10)\n            break\n        }\n        bar['_hidden'] = `... (${this.numOutput - 10} more objects)`\n        return this.removeArraysRecursive( bar )\n      }\n    }\n  },\n  data( ) {\n    return {\n      displayDialog: { },\n      objectArrayItem: { },\n      objectArrayIndex: -1,\n\n      isAuthenticating: false,\n    }\n  },\n  methods: {\n    removeArraysRecursive( foo ) {\n      let bar = {}\n\n      if (typeof foo == 'string')\n        return foo\n\n      for ( let key in foo ) {\n        if ( !foo.hasOwnProperty( key ) ) continue\n\n        if ( Array.isArray( foo[ key ] ) ) {\n          /*DO FUCKALL */\n          if( foo[key].length < 3 )\n            bar[key] = foo[key]\n          else {\n            bar[key] = [ ...foo[key].slice(0, 3), `... (${foo[key].length - 3} more values)` ]\n          }\n        } else if ( typeof foo[ key ] === 'object' && foo[ key ] !== null ) {\n          bar[ key ] = this.removeArraysRecursive( foo[ key ] )\n        } else {\n          bar[ key ] = foo[ key ]\n        }\n      }\n      return bar\n    },\n    tableHeader( headers ) {\n      var formatedHeaders = [ ]\n      headers.forEach(h => {\n        formatedHeaders.push({text: h, value: h, sortable: false})\n      })\n      formatedHeaders.push({text: 'actions', value: 'actions', sortable: false})\n      return formatedHeaders\n    },\n    resetObjectArrayDialog (param) {\n      this.objectArrayItem = { }\n      this.displayDialog[param.name] = false\n      this.objectArrayIndex = -1\n    },\n    addObjectArrayItem (param) {\n      if (Object.values(this.objectArrayItem).length == param.headers.length)\n      {\n        if (!this.params.hasOwnProperty(param.name)) this.params[param.name] = []\n\n        if (this.objectArrayIndex == -1)\n          this.params[param.name].push(this.objectArrayItem)\n        else\n          this.params[param.name].splice(this.objectArrayIndex, 1, this.objectArrayItem)\n        this.objectArrayItem = { }\n        this.$emit('update-param', {index: this.index, params: this.params})\n      }\n      this.resetObjectArrayDialog(param)\n    },\n    deleteObjectArrayItem (param, index) {\n      this.params[param.name].splice(index, 1)\n      this.$emit('update-param', {index: this.index, params: this.params})\n    },\n    editObjectArrayItem (param, index) {\n      this.objectArrayItem = Object.assign({}, this.params[param.name][index])\n      this.objectArrayIndex = index\n      this.displayDialog[param.name] = true\n    },\n    updateParams ( payload ) {\n      this.params = payload\n      this.$emit('update-param', {index: this.index, params: this.params})\n    },\n    authenticate ( ) {\n      if (this.isAuthenticated)\n        return\n\n      this.isAuthenticating = true\n      this.$store.dispatch('authenticateBlocks', [this.block])\n      .then( res => {\n        this.isAuthenticating = false\n      })\n      .catch( err => {\n        console.log(err)\n        this.isAuthenticated = false\n      })\n    }\n\n  },\n  created () {\n  }\n}\n</script>\n<style scoped lang='scss'>\n</style>\n"],"sourceRoot":"src/components"}]}