{"remainingRequest":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/thread-loader/dist/cjs.js!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/components/StreamDetailTitle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/components/StreamDetailTitle.vue","mtime":1609071089415},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.array.find\";\n\nvar _computed;\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport debounce from 'lodash.debounce';\nimport union from 'lodash.union';\nexport default {\n  name: 'StreamDetailTitle',\n  props: {\n    stream: Object // can be alert or info\n\n  },\n  computed: (_computed = {\n    jnMask: function jnMask() {\n      return this.$store.state.serverManifest.jnMask || \"######-##\";\n    },\n    allTags: function allTags() {\n      return this.$store.getters.allTags;\n    },\n    canEdit: function canEdit() {\n      if (this.$store.state.user.role == 'admin') return true;\n      return this.isOwner ? true : this.stream.canWrite.indexOf(this.$store.state.user._id) !== -1;\n    },\n    isOwner: function isOwner() {\n      return this.stream.owner === this.$store.state.user._id;\n    },\n    streamProjects: function streamProjects() {\n      var _this = this;\n\n      return this.$store.state.projects.filter(function (p) {\n        return p.streams.indexOf(_this.stream.streamId) !== -1;\n      });\n    },\n    viewLink: function viewLink() {\n      var url = new URL(this.$store.state.server);\n      return url.origin + \"/view?streams=\".concat(this.stream.streamId);\n    }\n  }, _defineProperty(_computed, \"isOwner\", function isOwner() {\n    return this.stream.owner === this.$store.state.user._id;\n  }), _defineProperty(_computed, \"allUsers\", function allUsers() {\n    return union(this.stream.canRead, this.stream.canWrite);\n  }), _defineProperty(_computed, \"owner\", function owner() {\n    var _this2 = this;\n\n    var u = this.$store.state.users.find(function (user) {\n      return user._id === _this2.stream.owner;\n    });\n\n    if (!u) {\n      this.$store.dispatch('getUser', {\n        _id: this.stream.owner\n      });\n    }\n\n    return u ? u.surname.includes(\"is you\") ? \"you\" : \"\".concat(u.name, \" \").concat(u.surname) : 'Loading';\n  }), _defineProperty(_computed, \"createdAt\", function createdAt() {\n    var date = new Date(this.stream.createdAt);\n    return date.toLocaleString('en', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  }), _computed),\n  data: function data() {\n    return {\n      tag: null\n    };\n  },\n  methods: {\n    updateTags: debounce(function (e) {\n      this.$store.dispatch('updateStream', {\n        streamId: this.stream.streamId,\n        tags: this.stream.tags\n      });\n    }, 1000),\n    updateName: function updateName(args) {\n      this.$store.dispatch('updateStream', {\n        streamId: this.stream.streamId,\n        name: args.text\n      });\n    },\n    updateJobNumber: debounce(function (e) {\n      this.$store.dispatch('updateStream', {\n        streamId: this.stream.streamId,\n        jobNumber: this.stream.jobNumber\n      });\n    }, 1000)\n  },\n  mounted: function mounted() {}\n};",{"version":3,"sources":["StreamDetailTitle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,OAAA,QAAA,MAAA,iBAAA;AACA,OAAA,KAAA,MAAA,cAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,mBADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA,MADA,CACA;;AADA,GAFA;AAKA,EAAA,QAAA;AACA,IAAA,MADA,oBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,cAAA,CAAA,MAAA,IAAA,WAAA;AACA,KAHA;AAIA,IAAA,OAJA,qBAIA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,OAAA;AACA,KANA;AAOA,IAAA,OAPA,qBAOA;AACA,UAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA,IAAA,OAAA,EAAA,OAAA,IAAA;AACA,aAAA,KAAA,OAAA,GAAA,IAAA,GAAA,KAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA,MAAA,CAAA,CAAA;AACA,KAVA;AAWA,IAAA,OAXA,qBAWA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,KAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA;AACA,KAbA;AAcA,IAAA,cAdA,4BAcA;AAAA;;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA,MAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,OAAA,CAAA,OAAA,CAAA,KAAA,CAAA,MAAA,CAAA,QAAA,MAAA,CAAA,CAAA;AAAA,OAAA,CAAA;AACA,KAhBA;AAiBA,IAAA,QAjBA,sBAiBA;AACA,UAAA,GAAA,GAAA,IAAA,GAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA;AACA,aAAA,GAAA,CAAA,MAAA,2BAAA,KAAA,MAAA,CAAA,QAAA,CAAA;AACA;AApBA,8DAqBA;AACA,WAAA,KAAA,MAAA,CAAA,KAAA,KAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA;AACA,GAvBA,8DAwBA;AACA,WAAA,KAAA,CAAA,KAAA,MAAA,CAAA,OAAA,EAAA,KAAA,MAAA,CAAA,QAAA,CAAA;AACA,GA1BA,wDA2BA;AAAA;;AACA,QAAA,CAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,aAAA,IAAA,CAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,KAAA;AAAA,KAAA,CAAA;;AACA,QAAA,CAAA,CAAA,EAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,SAAA,EAAA;AAAA,QAAA,GAAA,EAAA,KAAA,MAAA,CAAA;AAAA,OAAA;AACA;;AACA,WAAA,CAAA,GAAA,CAAA,CAAA,OAAA,CAAA,QAAA,CAAA,QAAA,sBAAA,CAAA,CAAA,IAAA,cAAA,CAAA,CAAA,OAAA,CAAA,GAAA,SAAA;AACA,GAjCA,gEAkCA;AACA,QAAA,IAAA,GAAA,IAAA,IAAA,CAAA,KAAA,MAAA,CAAA,SAAA,CAAA;AACA,WAAA,IAAA,CAAA,cAAA,CAAA,IAAA,EAAA;AAAA,MAAA,IAAA,EAAA,SAAA;AAAA,MAAA,KAAA,EAAA,MAAA;AAAA,MAAA,GAAA,EAAA;AAAA,KAAA,CAAA;AACA,GArCA,aALA;AA4CA,EAAA,IA5CA,kBA4CA;AACA,WAAA;AACA,MAAA,GAAA,EAAA;AADA,KAAA;AAGA,GAhDA;AAiDA,EAAA,OAAA,EAAA;AACA,IAAA,UAAA,EAAA,QAAA,CAAA,UAAA,CAAA,EAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,cAAA,EAAA;AAAA,QAAA,QAAA,EAAA,KAAA,MAAA,CAAA,QAAA;AAAA,QAAA,IAAA,EAAA,KAAA,MAAA,CAAA;AAAA,OAAA;AACA,KAFA,EAEA,IAFA,CADA;AAIA,IAAA,UAJA,sBAIA,IAJA,EAIA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,cAAA,EAAA;AAAA,QAAA,QAAA,EAAA,KAAA,MAAA,CAAA,QAAA;AAAA,QAAA,IAAA,EAAA,IAAA,CAAA;AAAA,OAAA;AACA,KANA;AAOA,IAAA,eAAA,EAAA,QAAA,CAAA,UAAA,CAAA,EAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,cAAA,EAAA;AAAA,QAAA,QAAA,EAAA,KAAA,MAAA,CAAA,QAAA;AAAA,QAAA,SAAA,EAAA,KAAA,MAAA,CAAA;AAAA,OAAA;AACA,KAFA,EAEA,IAFA;AAPA,GAjDA;AA4DA,EAAA,OA5DA,qBA4DA,CAAA;AA5DA,CAAA","sourcesContent":["<template>\n  <v-card class='elevation-0 pa-3'>\n    <v-layout row wrap>\n      <v-flex xs12 class='display-1 font-weight-light text-capitalize my-5'>\n        <v-btn icon @click.native='$router.push(`/view/${stream.streamId}`)'>\n          <v-icon>360</v-icon>\n        </v-btn>\n        <editable-span v-if='canEdit' :text='stream.name' @update='updateName'></editable-span>\n        <span v-else>{{stream.name}}</span>\n      </v-flex>\n      <v-flex xs12 class='caption' style='line-height: 32px'>\n        <v-icon small>fingerprint</v-icon>&nbsp;<strong style=\"user-select:all\">{{stream.streamId}}</strong>&nbsp;\n        <v-icon small>edit</v-icon>&nbsp;<timeago :datetime='stream.updatedAt'></timeago>&nbsp;\n        <v-icon small>access_time</v-icon>&nbsp; {{createdAt}}&nbsp;\n        <v-icon small>{{stream.private ? \"lock\" : \"lock_open\"}}</v-icon> link sharing {{stream.private ? \"off\" : \"on\" }} &nbsp;\n        <v-icon small>person_outline</v-icon> {{ allUsers.length }} &nbsp;\n        <v-icon small>history</v-icon> {{ stream.children.length }} &nbsp;\n        <span class='caption font-weight-light text-uppercase'>Owned by <strong>{{owner}}</strong></span>\n      </v-flex>\n      <v-flex xs12 class='ma-0 pa-0 mt-3 mb-2'>\n        <v-layout row align-center>\n          <v-flex xs3 class='pr-4'>\n            <v-text-field hint='Project Code' :mask='jnMask' v-model='stream.jobNumber' solo persistent-hint :disabled='!canEdit' @input='updateJobNumber'></v-text-field>\n          </v-flex>\n          <v-flex xs9>\n            <v-combobox @input='updateTags' :disabled='!canEdit' v-model=\"stream.tags\" :items='allTags' hint='add or remove tags' solo persistent-hint small-chips deletable-chips multiple tags>\n              <template v-slot:no-data>\n                <p>Add a new tag!</p>\n              </template>\n            </v-combobox>\n          </v-flex>\n        </v-layout>\n      </v-flex>\n    </v-layout>\n  </v-card>\n</template>\n<script>\nimport debounce from 'lodash.debounce'\nimport union from 'lodash.union'\n\nexport default {\n  name: 'StreamDetailTitle',\n  props: {\n    stream: Object, // can be alert or info\n  },\n  computed: {\n    jnMask( ) {\n      return this.$store.state.serverManifest.jnMask || \"######-##\"\n    },\n    allTags( ) {\n      return this.$store.getters.allTags\n    },\n    canEdit( ) {\n      if (this.$store.state.user.role == 'admin') return true\n      return this.isOwner ? true : this.stream.canWrite.indexOf( this.$store.state.user._id ) !== -1\n    },\n    isOwner( ) {\n      return this.stream.owner === this.$store.state.user._id\n    },\n    streamProjects( ) {\n      return this.$store.state.projects.filter( p => p.streams.indexOf( this.stream.streamId ) !== -1 )\n    },\n    viewLink( ) {\n      let url = new URL( this.$store.state.server )\n      return url.origin + `/view?streams=${this.stream.streamId}`\n    },\n    isOwner( ) {\n      return this.stream.owner === this.$store.state.user._id\n    },\n    allUsers( ) {\n      return union( this.stream.canRead, this.stream.canWrite )\n    },\n    owner( ) {\n      let u = this.$store.state.users.find( user => user._id === this.stream.owner )\n      if ( !u ) {\n        this.$store.dispatch( 'getUser', { _id: this.stream.owner } )\n      }\n      return u ? u.surname.includes( \"is you\" ) ? `you` : `${u.name} ${u.surname}` : 'Loading'\n    },\n    createdAt( ) {\n      let date = new Date( this.stream.createdAt )\n      return date.toLocaleString( 'en', { year: 'numeric', month: 'long', day: 'numeric' } )\n    },\n  },\n  data( ) {\n    return {\n      tag: null\n    }\n  },\n  methods: {\n    updateTags: debounce( function ( e ) {\n      this.$store.dispatch( 'updateStream', { streamId: this.stream.streamId, tags: this.stream.tags } )\n    }, 1000 ),\n    updateName( args ) {\n      this.$store.dispatch( 'updateStream', { streamId: this.stream.streamId, name: args.text } )\n    },\n    updateJobNumber: debounce( function ( e ) {\n      this.$store.dispatch( 'updateStream', { streamId: this.stream.streamId, jobNumber: this.stream.jobNumber } )\n    }, 1000 )\n  },\n  mounted( ) {}\n}\n\n</script>\n<style scoped lang='scss'>\n.title-card {\n  margin-left: 0;\n  margin-right: 0;\n}\n\n.md-card-content:last-of-type {\n  padding-bottom: 0px !important;\n}\n\n</style>\n"],"sourceRoot":"src/components"}]}