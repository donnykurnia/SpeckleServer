{"remainingRequest":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/thread-loader/dist/cjs.js!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/views/StreamOverview.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/views/StreamOverview.vue","mtime":1609071089435},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport debounce from 'lodash.debounce';\nimport union from 'lodash.union';\nimport StreamDetailTitle from '../components/StreamDetailTitle.vue';\nimport DetailDescription from '../components/DetailDescription.vue';\nimport StreamDetailNetwork from '../components/StreamDetailNetwork.vue';\nimport StreamDetailComments from '../components/StreamDetailComments.vue';\nexport default {\n  name: 'StreamDetailView',\n  components: {\n    StreamDetailTitle: StreamDetailTitle,\n    DetailDescription: DetailDescription,\n    StreamDetailNetwork: StreamDetailNetwork,\n    StreamDetailComments: StreamDetailComments\n  },\n  computed: {\n    stream: function stream() {\n      var _this = this;\n\n      var stream = this.$store.state.streams.find(function (s) {\n        return s.streamId === _this.$route.params.streamId;\n      });\n      return stream;\n    },\n    canEdit: function canEdit() {\n      if (this.$store.state.user.role == 'admin') return true;\n      return this.isOwner ? true : this.stream.canWrite.indexOf(this.$store.state.user._id) !== -1;\n    },\n    isOwner: function isOwner() {\n      return this.stream.owner === this.$store.state.user._id;\n    },\n    streamProjects: function streamProjects() {\n      var _this2 = this;\n\n      return this.$store.state.projects.filter(function (p) {\n        return p.streams.indexOf(_this2.stream.streamId) !== -1;\n      });\n    }\n  },\n  data: function data() {\n    return {\n      error: '',\n      editDescription: false\n    };\n  },\n  methods: {\n    restore: function restore() {\n      this.$store.dispatch('updateStream', {\n        streamId: this.stream.streamId,\n        deleted: false\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    var stream = this.$store.state.streams.find(function (s) {\n      return s.streamId === _this3.$route.params.streamId;\n    });\n\n    if (!stream) {\n      this.$store.dispatch('getStream', {\n        streamId: this.$route.params.streamId\n      }).then(function (res) {\n        _this3.$store.dispatch('getUser', {\n          _id: res.data.resource.owner\n        });\n\n        union(res.data.resource.canRead, res.data.resource.canWrite).forEach(function (_id) {\n          return _this3.$store.dispatch('getUser', {\n            _id: _id\n          });\n        });\n      }).catch(function (err) {\n        if (err.message.includes('404')) _this3.error = \"Stream \".concat(_this3.$route.params.streamId, \" was not found.\");\n        if (err.message.includes('401')) _this3.error = \"Stream \".concat(_this3.$route.params.streamId, \" is not accessible to you due to its protection level.\");\n      });\n    } else {\n      this.$store.dispatch('getUser', {\n        _id: stream.owner\n      });\n      union(stream.canRead, stream.canWrite).forEach(function (_id) {\n        return _this3.$store.dispatch('getUser', {\n          _id: _id\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["StreamOverview.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-layout row wrap>\n    <v-flex xs12>\n      <detail-description :resource='stream'></detail-description>\n      <stream-detail-network :stream='stream'></stream-detail-network>\n      <v-card class='elevation-0 pt-4'>\n        <v-toolbar dense class='elevation-0 transparent'>\n          <v-icon small left>business</v-icon>&nbsp;\n          <span class='title font-weight-light'>Projects</span>\n        </v-toolbar>\n        <v-divider></v-divider>\n        <v-card-text>\n          <v-chip v-for='(proj, index) in streamProjects' :key='proj._id' class='md-primary' md-clickable>\n            <router-link :to='\"/projects/\"+proj._id'>{{proj.name}}</router-link>&nbsp;\n          </v-chip></span>\n          <p v-if='streamProjects.length===0'>This stream is not part of any projects.</p>\n        </v-card-text>\n      </v-card>\n    </v-flex>\n  </v-layout>\n</template>\n<script>\nimport debounce from 'lodash.debounce'\nimport union from 'lodash.union'\n\nimport StreamDetailTitle from '../components/StreamDetailTitle.vue'\nimport DetailDescription from '../components/DetailDescription.vue'\nimport StreamDetailNetwork from '../components/StreamDetailNetwork.vue'\nimport StreamDetailComments from '../components/StreamDetailComments.vue'\n\nexport default {\n  name: 'StreamDetailView',\n  components: {\n    StreamDetailTitle,\n    DetailDescription,\n    StreamDetailNetwork,\n    StreamDetailComments\n  },\n  computed: {\n    stream( ) {\n      let stream = this.$store.state.streams.find( s => s.streamId === this.$route.params.streamId )\n      return stream\n    },\n    canEdit( ) {\n      if (this.$store.state.user.role == 'admin') return true\n      return this.isOwner ? true : this.stream.canWrite.indexOf( this.$store.state.user._id ) !== -1\n    },\n    isOwner( ) {\n      return this.stream.owner === this.$store.state.user._id\n    },\n    streamProjects( ) {\n      return this.$store.state.projects.filter( p => p.streams.indexOf( this.stream.streamId ) !== -1 )\n    }\n  },\n  data( ) {\n    return {\n      error: '',\n      editDescription: false\n    }\n  },\n  methods: {\n    restore( ) {\n      this.$store.dispatch( 'updateStream', { streamId: this.stream.streamId, deleted: false } )\n    },\n  },\n  mounted( ) {\n    let stream = this.$store.state.streams.find( s => s.streamId === this.$route.params.streamId )\n    if ( !stream ) {\n      this.$store.dispatch( 'getStream', { streamId: this.$route.params.streamId } )\n        .then( res => {\n          this.$store.dispatch( 'getUser', { _id: res.data.resource.owner } )\n          union( res.data.resource.canRead, res.data.resource.canWrite ).forEach( _id => this.$store.dispatch( 'getUser', { _id: _id } ) )\n        } )\n        .catch( err => {\n          if ( err.message.includes( '404' ) ) this.error = `Stream ${this.$route.params.streamId} was not found.`\n          if ( err.message.includes( '401' ) ) this.error = `Stream ${this.$route.params.streamId} is not accessible to you due to its protection level.`\n        } )\n    } else {\n      this.$store.dispatch( 'getUser', { _id: stream.owner } )\n      union( stream.canRead, stream.canWrite ).forEach( _id => this.$store.dispatch( 'getUser', { _id: _id } ) )\n    }\n  }\n}\n\n</script>\n<style scoped lang='scss'>\n</style>\n"],"sourceRoot":"src/views"}]}