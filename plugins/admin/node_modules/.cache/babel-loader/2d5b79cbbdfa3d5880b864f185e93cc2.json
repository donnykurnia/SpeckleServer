{"remainingRequest":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/thread-loader/dist/cjs.js!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/components/ProjectDetailTitle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/components/ProjectDetailTitle.vue","mtime":1609071089412},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.array.find\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport debounce from 'lodash.debounce';\nimport uniq from 'lodash.uniq';\nexport default {\n  name: 'HelloWorld',\n  props: {\n    project: Object\n  },\n  computed: {\n    jnMask: function jnMask() {\n      return this.$store.state.serverManifest.jnMask || \"######-##\";\n    },\n    allProjectStreams: function allProjectStreams() {\n      return this.project.streams.join(',');\n    },\n    allTags: function allTags() {\n      return this.$store.getters.allTags;\n    },\n    canEdit: function canEdit() {\n      return this.project.owner === this.$store.state.user._id || this.project.canWrite.indexOf(this.$store.state.user._id) > -1;\n    },\n    owner: function owner() {\n      var _this = this;\n\n      var u = this.$store.state.users.find(function (user) {\n        return user._id === _this.project.owner;\n      });\n\n      if (!u) {\n        this.$store.dispatch('getUser', {\n          _id: this.project.owner\n        });\n      }\n\n      return u ? u.surname.includes(\"is you\") ? \"you\" : \"\".concat(u.name, \" \").concat(u.surname) : 'Loading';\n    },\n    canReadProject: function canReadProject() {\n      return this.project.canRead;\n    },\n    canWriteProject: function canWriteProject() {\n      return this.project.canWrite;\n    },\n    canReadStreams: function canReadStreams() {\n      return this.project.permissions.canRead;\n    },\n    canWriteStreams: function canWriteStreams() {\n      return this.project.permissions.canWrite;\n    },\n    allUsers: function allUsers() {\n      return uniq([].concat(_toConsumableArray(this.canReadProject), _toConsumableArray(this.canWriteProject), _toConsumableArray(this.canReadStreams), _toConsumableArray(this.canWriteProject), [this.project.owner]));\n    }\n  },\n  data: function data() {\n    return {};\n  },\n  methods: {\n    updateName: function updateName(args) {\n      this.$store.dispatch('updateProject', {\n        _id: this.project._id,\n        name: args.text\n      });\n    },\n    updateTags: debounce(function (e) {\n      this.$store.dispatch('updateProject', {\n        _id: this.project._id,\n        tags: this.project.tags\n      });\n    }, 1000),\n    updateJobNumber: debounce(function (e) {\n      this.$store.dispatch('updateProject', {\n        _id: this.project._id,\n        jobNumber: this.project.jobNumber\n      });\n    }, 1000)\n  }\n};",{"version":3,"sources":["ProjectDetailTitle.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-card class='elevation-0 pa-3'>\n    <v-layout row wrap>\n      <v-flex xs12 class='display-1 font-weight-light text-capitalize my-5'>\n        <v-btn icon @click.native='$router.push(`/view/${allProjectStreams}`)'>\n          <v-icon>360</v-icon>\n        </v-btn>\n        <!-- {{allProjectStreams}} -->\n        <editable-span v-if='canEdit' :text='project.name' @update='updateName'></editable-span>\n        <span v-else>{{project.name}}</span>\n      </v-flex>\n      <v-flex xs12 class='caption' style='line-height: 32px'>\n        <v-icon small>person</v-icon> <span class='caption'>{{project.canRead.length}}</span>&nbsp;\n        <v-icon small>import_export</v-icon> <span class='caption'>{{project.streams.length}}</span>&nbsp;\n        <v-icon small>fingerprint</v-icon>&nbsp;<strong style=\"user-select:all\">{{project._id}}</strong>&nbsp;\n        <v-icon small>access_time</v-icon>&nbsp;<timeago :datetime='project.updatedAt'></timeago>&nbsp;\n        <span class='caption font-weight-light text-uppercase'>Owned by <strong>{{owner}}</strong>. You {{canEdit ? 'can' : 'cannot'}} edit.</span>\n      </v-flex>\n      <v-flex xs12 class='ma-0 pa-0 mt-3 mb-2'>\n        <v-layout row align-center>\n          <v-flex xs3 class=''>\n            <v-text-field hint='Project Code' :mask='jnMask' v-model='project.jobNumber' solo persistent-hint :disabled='!canEdit' @input='updateJobNumber'></v-text-field>\n          </v-flex>\n          <v-flex xs9>\n            <v-combobox @input='updateTags' :disabled='!canEdit' v-model=\"project.tags\" :items='allTags' hint='add or remove tags' solo persistent-hint small-chips deletable-chips multiple tags>\n              <template v-slot:no-data>Add a new tag!</template>\n            </v-combobox>\n          </v-flex>\n        </v-layout>\n      </v-flex>\n    </v-layout>\n  </v-card>\n</template>\n<script>\nimport debounce from 'lodash.debounce'\nimport uniq from 'lodash.uniq'\n\nexport default {\n  name: 'HelloWorld',\n  props: {\n    project: Object\n  },\n  computed: {\n    jnMask( ) {\n      return this.$store.state.serverManifest.jnMask || \"######-##\"\n    },\n    allProjectStreams( ) {\n      return this.project.streams.join( ',' )\n    },\n    allTags( ) {\n      return this.$store.getters.allTags\n    },\n    canEdit( ) {\n      return this.project.owner === this.$store.state.user._id || this.project.canWrite.indexOf( this.$store.state.user._id ) > -1\n    },\n    owner( ) {\n      let u = this.$store.state.users.find( user => user._id === this.project.owner )\n      if ( !u ) {\n        this.$store.dispatch( 'getUser', { _id: this.project.owner } )\n      }\n      return u ? u.surname.includes( \"is you\" ) ? `you` : `${u.name} ${u.surname}` : 'Loading'\n    },\n    canReadProject( ) { return this.project.canRead },\n    canWriteProject( ) { return this.project.canWrite },\n    canReadStreams( ) { return this.project.permissions.canRead },\n    canWriteStreams( ) { return this.project.permissions.canWrite },\n    allUsers( ) {\n      return uniq( [ ...this.canReadProject, ...this.canWriteProject, ...this.canReadStreams, ...this.canWriteProject, this.project.owner ] )\n    }\n  },\n  data( ) { return {} },\n  methods: {\n    updateName( args ) {\n      this.$store.dispatch( 'updateProject', { _id: this.project._id, name: args.text } )\n    },\n    updateTags: debounce( function ( e ) {\n      this.$store.dispatch( 'updateProject', { _id: this.project._id, tags: this.project.tags } )\n    }, 1000 ),\n    updateJobNumber: debounce( function ( e ) {\n      this.$store.dispatch( 'updateProject', { _id: this.project._id, jobNumber: this.project.jobNumber } )\n    }, 1000 )\n  }\n}\n\n</script>\n<style scoped lang='scss'>\n.title-card {\n  margin-left: 0;\n  margin-right: 0;\n}\n\n.project-name {\n  transition: all 0.2s ease;\n}\n\n.project-name:hover {\n  color: #448aff;\n}\n\n</style>\n"],"sourceRoot":"src/components"}]}