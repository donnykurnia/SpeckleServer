{"remainingRequest":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/thread-loader/dist/cjs.js!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/main.js","dependencies":[{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/main.js","mtime":1609071089419},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _JSON$stringify from \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@vue/babel-preset-app/node_modules/core-js/modules/es6.array.iterator.js\";\nimport \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@vue/babel-preset-app/node_modules/core-js/modules/es6.promise.js\";\nimport \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@vue/babel-preset-app/node_modules/core-js/modules/es6.object.assign.js\";\nimport \"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/@vue/babel-preset-app/node_modules/core-js/modules/es7.promise.finally.js\";\nimport Vue from 'vue';\nimport Axios from 'axios';\nimport App from './App.vue';\nimport Router from './router';\nimport Store from './store/store';\nimport './registerServiceWorker';\nVue.config.productionTip = false;\nimport Vuetify from 'vuetify';\nimport 'vuetify/dist/vuetify.min.css';\nimport colors from 'vuetify/es5/util/colors';\nVue.use(Vuetify, {\n  theme: {\n    primary: colors.blue.darken1,\n    // #E53935\n    secondary: colors.blue.lighten4,\n    // #FFCDD2\n    accent: colors.indigo.base // #3F51B5\n\n  }\n});\nimport VueTimeago from 'vue-timeago';\nVue.use(VueTimeago, {\n  locale: 'en'\n});\nimport base64url from 'base64url'; // Set up the server route\n// Step 1: Get it form local storage.\n\nvar server = localStorage.getItem('currentServer');\nif (server) Store.state.server = server; // Step 2: If a query url is present, and different, overwrite it.\n\ntry {\n  var queryString = window.location.href.split('?')[1];\n  var queryVal = queryString.split('=')[1];\n  var queryObject = JSON.parse(base64url.decode(queryVal));\n  if (queryObject.server && Store.state.server != queryObject.server) Store.state.server = queryObject.server;\n} catch (err) {\n  console.log('Query borked');\n  console.log(err);\n} // set default server\n\n\nAxios.defaults.baseURL = Store.state.server; // Get the token, if any is present.\n\nvar token = localStorage.getItem('token'); // Start the init flow\n\nAxios.get(Store.state.server).then(function (response) {\n  Store.state.serverManifest = response.data;\n  return Axios.get(\"\".concat(Store.state.server, \"/accounts?omit=logins\"), {\n    headers: {\n      Authorization: token\n    }\n  });\n}).then(function (response) {\n  // means we're logged out\n  if (response === null) {\n    // TODO\n    initApp();\n    return;\n  } // needs to log in\n\n\n  if (response.status !== 200) {\n    // TODO\n    initApp();\n    return;\n  } // set defaults in axios, if we got this far things should be fine\n\n\n  Axios.defaults.headers.common['Authorization'] = token; // update the store\n\n  Store.state.isAuth = true;\n  Store.state.user = response.data.resource;\n  Store.state.token = token;\n  initApp();\n}).catch(function (err) {\n  initApp();\n}); // set axios as default $http request lib\n\nVue.prototype.$http = Axios; // event bus used for triggerring events cross-hirearchy\n\nwindow.bus = new Vue(); // get hex color from string global mixin\n\nimport CH from 'color-hash';\nvar ColorHasher = new CH();\nVue.mixin({\n  methods: {\n    getHexFromString: function getHexFromString(str) {\n      return ColorHasher.hex(str);\n    },\n    hexFromString: function hexFromString(str) {\n      return ColorHasher.hex(str);\n    },\n    appendInfoToUrl: function appendInfoToUrl(key, info) {\n      var existingQueryObject = this.$route.query.s ? JSON.parse(base64url.decode(this.$route.query.s)) : {};\n      if (info !== null) existingQueryObject[key] = info;else delete existingQueryObject[key];\n      this.$router.replace({\n        params: this.$route.params,\n        query: {\n          s: base64url(_JSON$stringify(existingQueryObject))\n        }\n      }); // console.log( existingQueryObject )\n    },\n    getUrlQueryObject: function getUrlQueryObject() {\n      if (!this.$route.query.s) return null;\n      return this.$route.query.s ? JSON.parse(base64url.decode(this.$route.query.s)) : null;\n    }\n  }\n});\nimport EditableSpan from './components/EditableSpan.vue';\nVue.component('editable-span', EditableSpan);\nimport Countly from 'countly-sdk-web';\nimport VueCountly from 'vue-countly'; ////////////////////////////////////////////////////////////\n//                                                        //\n// Commment out the 4 lines below to disable telemetry!   //\n//                                                        //\n////////////////////////////////////////////////////////////\n\nVue.use(VueCountly, Countly, {\n  app_key: '04ac5c1e31e993f2624e964475dd949e9a3443f5',\n  url: 'https://telemetry.speckle.works'\n}); // Automatic 'plugin' component registration:\n// H/T to Chris Fritz...\n\nVue.prototype.$pluginRoutes = [];\n\nvar requireComponent = require.context( // The relative path of the components folder\n'@/plugins', // Whether or not to look in subfolders\ntrue, // The regular expression used to match base component filenames\n/plugin-[\\w-]+\\.vue$/);\n\ntry {\n  // console.log( requireComponent.keys( ) )\n  requireComponent.keys().forEach(function (fileName) {\n    // Get the component config\n    var componentConfig = requireComponent(fileName); // Globally register the component\n\n    var component = Vue.component(componentConfig.default.name, componentConfig.default || componentConfig);\n    var path = componentConfig.default.name.replace(/([a-z])([A-Z])/g, \"$1-$2\").replace(/\\s+/g, \"-\").toLowerCase();\n    var route = {\n      name: path,\n      path: '/plugins/' + path,\n      component: component,\n      meta: {\n        requiresAuth: componentConfig.default.manifest.requiresAuth\n      }\n    };\n    Router.addRoutes([route]);\n    Vue.prototype.$pluginRoutes.push(route);\n    if (componentConfig.default.manifest.registerInNav) Store.state.adminPlugins.push({\n      name: componentConfig.default.manifest.humanReadableName,\n      description: componentConfig.default.manifest.description,\n      icon: componentConfig.default.manifest.icon,\n      requiresAuth: componentConfig.default.manifest.requiresAuth,\n      route: '/plugins/' + path\n    });\n  });\n} catch (error) {\n  console.error(error);\n} // The init logic (it's called after we do some auth flows)\n\n\nvar initApp = function initApp() {\n  new Vue({\n    router: Router,\n    store: Store,\n    render: function render(h) {\n      return h(App);\n    },\n    created: function created() {\n      ////////////////////////////////////////////////////////////\n      //                                                        //\n      // Commment out the two lines below to disable telemetry! //\n      //                                                        //\n      ////////////////////////////////////////////////////////////\n      this.$Countly.q.push(['track_sessions']);\n      Router.$Countly = this.$Countly;\n    }\n  }).$mount('#app');\n};",{"version":3,"sources":["/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/main.js"],"names":["Vue","Axios","App","Router","Store","config","productionTip","Vuetify","colors","use","theme","primary","blue","darken1","secondary","lighten4","accent","indigo","base","VueTimeago","locale","base64url","server","localStorage","getItem","state","queryString","window","location","href","split","queryVal","queryObject","JSON","parse","decode","err","console","log","defaults","baseURL","token","get","then","response","serverManifest","data","headers","Authorization","initApp","status","common","isAuth","user","resource","catch","prototype","$http","bus","CH","ColorHasher","mixin","methods","getHexFromString","str","hex","hexFromString","appendInfoToUrl","key","info","existingQueryObject","$route","query","s","$router","replace","params","getUrlQueryObject","EditableSpan","component","Countly","VueCountly","app_key","url","$pluginRoutes","requireComponent","require","context","keys","forEach","fileName","componentConfig","default","name","path","toLowerCase","route","meta","requiresAuth","manifest","addRoutes","push","registerInNav","adminPlugins","humanReadableName","description","icon","error","router","store","render","h","created","$Countly","q","$mount"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Axios from 'axios'\nimport App from './App.vue'\nimport Router from './router'\nimport Store from './store/store'\nimport './registerServiceWorker'\n\nVue.config.productionTip = false\n\nimport Vuetify from 'vuetify'\nimport 'vuetify/dist/vuetify.min.css'\nimport colors from 'vuetify/es5/util/colors'\n\nVue.use( Vuetify, {\n  theme: {\n    primary: colors.blue.darken1, // #E53935\n    secondary: colors.blue.lighten4, // #FFCDD2\n    accent: colors.indigo.base // #3F51B5\n  }\n} )\n\nimport VueTimeago from 'vue-timeago'\nVue.use( VueTimeago, { locale: 'en' } )\n\nimport base64url from 'base64url'\n// Set up the server route\n// Step 1: Get it form local storage.\nlet server = localStorage.getItem( 'currentServer' )\nif ( server )\n  Store.state.server = server\n\n// Step 2: If a query url is present, and different, overwrite it.\ntry {\n  let queryString = window.location.href.split( '?' )[ 1 ]\n  let queryVal = queryString.split( '=' )[ 1 ]\n  let queryObject = JSON.parse( base64url.decode( queryVal ) )\n\n  if ( queryObject.server && Store.state.server != queryObject.server )\n    Store.state.server = queryObject.server\n\n} catch ( err ) {\n  console.log( 'Query borked' )\n  console.log( err )\n}\n\n// set default server\nAxios.defaults.baseURL = Store.state.server\n\n// Get the token, if any is present.\nlet token = localStorage.getItem( 'token' )\n\n// Start the init flow\nAxios.get( Store.state.server )\n  .then( response => {\n    Store.state.serverManifest = response.data\n    return Axios.get( `${Store.state.server}/accounts?omit=logins`, { headers: { Authorization: token } } )\n  } )\n  .then( response => {\n    // means we're logged out\n    if ( response === null ) {\n      // TODO\n      initApp( )\n      return\n    }\n    // needs to log in\n    if ( response.status !== 200 ) {\n      // TODO\n      initApp( )\n      return\n    }\n    // set defaults in axios, if we got this far things should be fine\n    Axios.defaults.headers.common[ 'Authorization' ] = token\n    // update the store\n    Store.state.isAuth = true\n    Store.state.user = response.data.resource\n    Store.state.token = token\n\n    initApp( )\n  } )\n  .catch( err => {\n    initApp( )\n  } )\n\n// set axios as default $http request lib\nVue.prototype.$http = Axios\n\n// event bus used for triggerring events cross-hirearchy\nwindow.bus = new Vue( )\n\n// get hex color from string global mixin\nimport CH from 'color-hash'\nlet ColorHasher = new CH( )\n\nVue.mixin( {\n  methods: {\n    getHexFromString: str => ColorHasher.hex( str ),\n    hexFromString: str => ColorHasher.hex( str ),\n    appendInfoToUrl( key, info ) {\n      let existingQueryObject = this.$route.query.s ? JSON.parse( base64url.decode( this.$route.query.s ) ) : {}\n      if ( info !== null )\n        existingQueryObject[ key ] = info\n      else\n        delete existingQueryObject[ key ]\n\n      this.$router.replace( { params: this.$route.params, query: { s: base64url( JSON.stringify( existingQueryObject ) ) } } )\n\n      // console.log( existingQueryObject )\n    },\n    getUrlQueryObject( ) {\n      if ( !this.$route.query.s )\n        return null\n      return this.$route.query.s ? JSON.parse( base64url.decode( this.$route.query.s ) ) : null\n    },\n  }\n} )\n\n\nimport EditableSpan from './components/EditableSpan.vue'\nVue.component( 'editable-span', EditableSpan )\n\nimport Countly from 'countly-sdk-web'\nimport VueCountly from 'vue-countly'\n\n\n////////////////////////////////////////////////////////////\n//                                                        //\n// Commment out the 4 lines below to disable telemetry!   //\n//                                                        //\n////////////////////////////////////////////////////////////\nVue.use( VueCountly, Countly, {\n  app_key: '04ac5c1e31e993f2624e964475dd949e9a3443f5',\n  url: 'https://telemetry.speckle.works',\n} );\n\n// Automatic 'plugin' component registration:\n// H/T to Chris Fritz...\n\nVue.prototype.$pluginRoutes = [ ]\nconst requireComponent = require.context(\n  // The relative path of the components folder\n  '@/plugins',\n  // Whether or not to look in subfolders\n  true,\n  // The regular expression used to match base component filenames\n  /plugin-[\\w-]+\\.vue$/\n)\n\ntry {\n  // console.log( requireComponent.keys( ) )\n  requireComponent.keys( ).forEach( ( fileName ) => {\n    // Get the component config\n    const componentConfig = requireComponent( fileName )\n    // Globally register the component\n    const component = Vue.component( componentConfig.default.name, componentConfig.default || componentConfig )\n    const path = componentConfig.default.name\n      .replace( /([a-z])([A-Z])/g, \"$1-$2\" )\n      .replace( /\\s+/g, \"-\" )\n      .toLowerCase( );\n  \n    const route = {\n      name: path,\n      path: '/plugins/' + path,\n      component: component,\n      meta: { requiresAuth: componentConfig.default.manifest.requiresAuth },\n    }\n    Router.addRoutes( [ route ] )\n    Vue.prototype.$pluginRoutes.push( route )\n  \n    if ( componentConfig.default.manifest.registerInNav )\n      Store.state.adminPlugins.push( {\n        name: componentConfig.default.manifest.humanReadableName,\n        description: componentConfig.default.manifest.description,\n        icon: componentConfig.default.manifest.icon,\n        requiresAuth: componentConfig.default.manifest.requiresAuth,\n        route: '/plugins/' + path,\n      } )\n  \n  } )\n} catch (error) {\n  console.error(error)\n}\n\n// The init logic (it's called after we do some auth flows)\nlet initApp = ( ) => {\n  new Vue( {\n    router: Router,\n    store: Store,\n    render: h => h( App ),\n    created( ) {\n\n      ////////////////////////////////////////////////////////////\n      //                                                        //\n      // Commment out the two lines below to disable telemetry! //\n      //                                                        //\n      ////////////////////////////////////////////////////////////\n      this.$Countly.q.push( [ 'track_sessions' ] )\n      Router.$Countly = this.$Countly\n    }\n  } ).$mount( '#app' )\n}\n"]}]}