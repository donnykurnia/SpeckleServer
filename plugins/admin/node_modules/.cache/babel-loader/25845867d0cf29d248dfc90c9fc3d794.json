{"remainingRequest":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/thread-loader/dist/cjs.js!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/components/UserSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/src/components/UserSearch.vue","mtime":1609071089417},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/donnykurnia/data/Projects/upwork/3dbyggeri/glasshouse/SpeckleServer/plugins/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport debounce from 'lodash.debounce';\nimport Axios from 'axios';\nexport default {\n  name: 'UserSearch',\n  props: {\n    msg: String\n  },\n  data: function data() {\n    return {\n      userSearch: '',\n      foundUsers: [],\n      searchInProgress: false\n    };\n  },\n  watch: {\n    userSearch: function userSearch(newVal, oldVal) {\n      if (newVal === '') {\n        this.foundUsers = [];\n        this.searchInProgress = false;\n      }\n    }\n  },\n  methods: {\n    selectUser: function selectUser(userId) {\n      this.$emit('selected-user', userId);\n      var index = this.foundUsers.findIndex(function (u) {\n        return u._id === userId;\n      });\n      this.foundUsers.splice(index, 1);\n    },\n    startSearchUsers: function startSearchUsers() {\n      this.searchInProgress = true;\n      this.searchUsers(this.userSearch);\n    },\n    searchUsers: debounce(function (searchString) {\n      var _this = this;\n\n      if (searchString === '' || searchString === null) {\n        this.foundUsers = [];\n        this.searchInProgress = false;\n        return;\n      }\n\n      if (searchString.length < 3) {\n        // TODO: Show an error\n        return;\n      }\n\n      Axios.post('/accounts/search', {\n        searchString: searchString\n      }).then(function (res) {\n        console.log(res);\n        _this.foundUsers = res.data.resources; // build up a db of users\n\n        if (res.data.resources.length > 0) _this.$store.commit('ADD_USERS', res.data.resources);\n        _this.searchInProgress = false;\n      }).catch(function (err) {\n        _this.foundUsers = [];\n        _this.searchInProgress = false;\n      });\n    }, 1500)\n  }\n};",{"version":3,"sources":["UserSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,OAAA,QAAA,MAAA,iBAAA;AACA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,UAAA,EAAA,EAFA;AAGA,MAAA,gBAAA,EAAA;AAHA,KAAA;AAKA,GAXA;AAYA,EAAA,KAAA,EAAA;AACA,IAAA,UADA,sBACA,MADA,EACA,MADA,EACA;AACA,UAAA,MAAA,KAAA,EAAA,EAAA;AACA,aAAA,UAAA,GAAA,EAAA;AACA,aAAA,gBAAA,GAAA,KAAA;AACA;AACA;AANA,GAZA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,MADA,EACA;AACA,WAAA,KAAA,CAAA,eAAA,EAAA,MAAA;AACA,UAAA,KAAA,GAAA,KAAA,UAAA,CAAA,SAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,GAAA,KAAA,MAAA;AAAA,OAAA,CAAA;AACA,WAAA,UAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,KALA;AAMA,IAAA,gBANA,8BAMA;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,WAAA,WAAA,CAAA,KAAA,UAAA;AACA,KATA;AAUA,IAAA,WAAA,EAAA,QAAA,CAAA,UAAA,YAAA,EAAA;AAAA;;AACA,UAAA,YAAA,KAAA,EAAA,IAAA,YAAA,KAAA,IAAA,EAAA;AACA,aAAA,UAAA,GAAA,EAAA;AACA,aAAA,gBAAA,GAAA,KAAA;AACA;AACA;;AACA,UAAA,YAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA;AACA;AACA;;AACA,MAAA,KAAA,CAAA,IAAA,CAAA,kBAAA,EAAA;AAAA,QAAA,YAAA,EAAA;AAAA,OAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAFA,CAGA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,MAAA,GAAA,CAAA,EACA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,WAAA,EAAA,GAAA,CAAA,IAAA,CAAA,SAAA;AACA,QAAA,KAAA,CAAA,gBAAA,GAAA,KAAA;AACA,OARA,EASA,KATA,CASA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,gBAAA,GAAA,KAAA;AACA,OAZA;AAaA,KAvBA,EAuBA,IAvBA;AAVA;AApBA,CAAA","sourcesContent":["<template>\n  <v-layout align-center row wrap>\n    <v-flex xs12 class='pb-0'>\n      <v-text-field box label='search for users' clearable v-model='userSearch' flat :loading='searchInProgress' prepend-inner-icon=\"search\" @input='startSearchUsers'></v-text-field>\n    </v-flex>\n    <v-flex xs12 style='margin-top:-30px' class='mb-5' v-if='userSearch!==null && foundUsers.length > 0'>\n      <v-card class='elevation-10'>\n        <v-card-title class='subheading' v-if='userSearch'>Search results ({{foundUsers.length}} users)</v-card-title>\n        <v-divider></v-divider>\n        <v-card-text style='max-height: 410px; overflow-y: auto; overflow-x: hidden;' v-if='foundUsers.length>0'>\n          <v-list two-line xxxv-if='filters.length > 0'>\n            <v-list-tile v-for='user in foundUsers' :key='user._id'>\n              <v-list-tile-content>\n                <v-list-tile-title>\n                  {{user.name}} {{user.surname}}\n                </v-list-tile-title>\n                <v-list-tile-sub-title class='caption'>\n                  <span class='caption'>{{user.company}}</span>\n                </v-list-tile-sub-title>\n              </v-list-tile-content>\n              <v-list-tile-action>\n                <v-btn fab small depressed @click.native='selectUser(user._id)'>\n                  <v-icon>add</v-icon>\n                </v-btn>\n              </v-list-tile-action>\n            </v-list-tile>\n          </v-list>\n        </v-card-text>\n      </v-card>\n    </v-flex>\n  </v-layout>\n</template>\n<script>\nimport debounce from 'lodash.debounce'\nimport Axios from 'axios'\n\nexport default {\n  name: 'UserSearch',\n  props: {\n    msg: String\n  },\n  data( ) {\n    return {\n      userSearch: '',\n      foundUsers: [ ],\n      searchInProgress: false\n    }\n  },\n  watch: {\n    userSearch( newVal, oldVal ) {\n      if ( newVal === '' ) {\n        this.foundUsers = [ ]\n        this.searchInProgress = false\n      }\n    }\n  },\n  methods: {\n    selectUser( userId ) {\n      this.$emit( 'selected-user', userId )\n      let index = this.foundUsers.findIndex( u => u._id === userId )\n      this.foundUsers.splice( index, 1 )\n    },\n    startSearchUsers( ) {\n      this.searchInProgress = true\n      this.searchUsers( this.userSearch )\n    },\n    searchUsers: debounce( function( searchString ) {\n      if ( searchString === '' || searchString === null ) {\n        this.foundUsers = [ ]\n        this.searchInProgress = false\n        return\n      }\n      if ( searchString.length < 3 ) {\n        // TODO: Show an error\n        return\n      }\n      Axios.post( '/accounts/search', { searchString: searchString } )\n        .then( res => {\n          console.log( res )\n          this.foundUsers = res.data.resources\n          // build up a db of users\n          if ( res.data.resources.length > 0 )\n            this.$store.commit( 'ADD_USERS', res.data.resources )\n          this.searchInProgress = false\n        } )\n        .catch( err => {\n          this.foundUsers = [ ]\n          this.searchInProgress = false\n        } )\n    }, 1500 )\n  }\n}\n\n</script>\n<style scoped lang='scss'>\n.hovered {\n  cursor: pointer;\n}\n</style>\n"],"sourceRoot":"src/components"}]}