(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b3630"],{"27c8":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"grid-list-xl":""}},[e.selectedResources.length>0?r("v-toolbar",{staticClass:"elevation-0",staticStyle:{"z-index":"100"},attrs:{fixed:""}},[r("v-toolbar-items",[r("v-btn",{staticClass:"md-raised md-dense md-primary",attrs:{icon:"",color:"primary"},nativeOn:{click:function(t){return e.clearSelection(t)}}},[r("v-icon",[e._v("close")])],1),r("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){return e.selectAll()}}},[e._v("select all")])],1),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{flat:"",color:"error"},nativeOn:{click:function(t){return e.deleteAllSelected()}}},[e._v("Delete Permanently ("+e._s(e.selectedResources.length)+")")]),r("v-btn",{attrs:{color:"primary",depressed:""},nativeOn:{click:function(t){return e.restoreAllSelected()}}},[e._v("Restore")])],1)],1):e._e(),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{staticClass:"headline font-weight-light",attrs:{xs12:"","py-5":""}},[e._v("\n      Welcome to the recycle bin ("+e._s(e.allResources.length)+" items). You can restore them or delete them permanently."),r("br"),r("strong",[e._v("Take care, there's no undo button!")])]),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{solo:"",clearable:"",label:"Search for a resource","prepend-inner-icon":"search",spellcheck:"false"},on:{input:function(e){}},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e.filterText&&""!==e.filterText?r("div",[r("p",{staticClass:"title font-weight-light my-3 mx-1"},[e._v("Found "+e._s(e.allResourcesFiltered.length)+" resources matching your search criteria.")])]):e._e()],1),r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{icon:"",small:"",disabled:0===e.pageNumber},nativeOn:{click:function(t){e.pageNumber=0}}},[r("v-icon",[e._v("first_page")])],1),r("v-btn",{attrs:{icon:"",small:"",disabled:0===e.pageNumber},nativeOn:{click:function(t){e.pageNumber-=1}}},[r("v-icon",[e._v("chevron_left")])],1),r("v-btn",{attrs:{icon:"",disabled:e.pageNumber>=Math.round(e.allResourcesFiltered.length/e.sliceSize)},nativeOn:{click:function(t){e.pageNumber+=1}}},[r("v-icon",[e._v("chevron_right")])],1),r("v-btn",{attrs:{icon:"",small:"",disabled:e.pageNumber>=Math.round(e.allResourcesFiltered.length/e.sliceSize)},nativeOn:{click:function(t){e.pageNumber=Math.round(e.allResourcesFiltered.length/e.sliceSize)}}},[r("v-icon",[e._v("last_page")])],1),r("span",{staticClass:"caption",attrs:{xxxstyle:"position: relative;top:8px;"}},[e._v(e._s(e.pageNumber)+" / "+e._s((e.allResourcesFiltered.length/e.sliceSize).toFixed(0)))])],1),r("v-flex",{attrs:{xs12:""}},[r("v-layout",{attrs:{row:"",wrap:""}},e._l(e.allResourcesPaginated,function(t){return r("v-flex",{key:t._id,attrs:{xs12:"",sm6:"",lg6:""}},[r("simple-card",{attrs:{resource:t,"xxxxv-on:deleted":"clearSelection"},on:{selected:e.selectThis}})],1)}),1)],1),r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{icon:"",small:"",disabled:0===e.pageNumber},nativeOn:{click:function(t){e.pageNumber=0}}},[r("v-icon",[e._v("first_page")])],1),r("v-btn",{attrs:{icon:"",small:"",disabled:0===e.pageNumber},nativeOn:{click:function(t){e.pageNumber-=1}}},[r("v-icon",[e._v("chevron_left")])],1),r("v-btn",{attrs:{icon:"",disabled:e.pageNumber>=Math.round(e.allResourcesFiltered.length/e.sliceSize)},nativeOn:{click:function(t){e.pageNumber+=1}}},[r("v-icon",[e._v("chevron_right")])],1),r("v-btn",{attrs:{icon:"",small:"",disabled:e.pageNumber>=Math.round(e.allResourcesFiltered.length/e.sliceSize)},nativeOn:{click:function(t){e.pageNumber=Math.round(e.allResourcesFiltered.length/e.sliceSize)}}},[r("v-icon",[e._v("last_page")])],1),r("span",{staticClass:"caption",attrs:{xxxstyle:"position: relative;top:8px;"}},[e._v(e._s(e.pageNumber)+" / "+e._s((e.allResourcesFiltered.length/e.sliceSize).toFixed(0)))])],1)],1)],1)},i=[],n=(r("20d6"),r("ac6a"),r("5d73")),a=r.n(n),c=(r("6762"),r("2fdb"),r("7f7f"),r("75fc")),l=(r("55dd"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{class:{"elevation-10":e.selected,"elevation-1":!0},style:"opacity:"+(e.isOwner?1:.2)+";pointer-events:"+(e.isOwner?"all":"none")+";"},[r("v-card-title",[r("v-icon",{attrs:{left:""}},[e._v(e._s("stream"===e.resourceType?"import_export":"business"))]),e._v(" \n    "),r("span",{staticClass:"title font-weight-light"},[e._v(e._s(e.resource.name?e.resource.name:"No Name"))]),e._v(" \n    "),r("span",{staticClass:"caption"},[e._v("("+e._s(e.resourceType)+")")]),e._v(" \n    "),r("v-spacer"),r("span"),r("span",[r("v-checkbox",{attrs:{color:"primary"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),r("v-divider",{staticClass:"mx-0 my-0"}),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{staticClass:"caption",attrs:{xs12:"","ma-2":""}},[r("v-icon",{attrs:{small:""}},[e._v("edit")]),e._v(" "),r("timeago",{attrs:{datetime:e.resource.updatedAt}}),e._v(" \n      "),r("v-icon",{attrs:{small:""}},[e._v("access_time")]),e._v("  "+e._s(e.createdAt)+" \n    ")],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.isOwner,expression:"isOwner"}],staticClass:"transparent",attrs:{depressed:"",flat:"",color:"error"},nativeOn:{click:function(t){return e.deleteForever()}}},[e._v("Delete Permanently")]),r("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){return e.restore()}}},[e._v("Restore")])],1)],1)}),o=[],d=(r("f7fe"),r("c36e"),r("13bb"),r("0e54"),{name:"ProjectCard",props:{resource:Object},watch:{selected:function(){this.$emit("selected",this.resource)}},computed:{project:function(){return this.resource},createdAt:function(){var e=new Date(this.project.createdAt);return e.toLocaleString("en",{year:"numeric",month:"long",day:"numeric"})},canEdit:function(){return!!this.isOwner||-1!==this.project.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.project.owner===this.$store.state.user._id},resourceType:function(){return this.resource.streamId?"stream":"project"}},data:function(){return{selected:!1}},methods:{deleteForever:function(){this.resource.streamId?this.$store.dispatch("deleteStream",{streamId:this.resource.streamId}):this.$store.dispatch("deleteProject",{_id:this.resource._id})},restore:function(){this.resource.streamId?this.$store.dispatch("updateStream",{streamId:this.resource.streamId,deleted:!1}):this.$store.dispatch("updateProject",{_id:this.resource._id,deleted:!1})}},mounted:function(){var e=this;bus.$on("select-resource",function(t){t===e.resource._id&&(e.selected=!0)}),bus.$on("unselect-all-resources",function(){e.selected=!1})}}),u=d,v=r("2877"),h=Object(v["a"])(u,l,o,!1,null,"468f5cbd",null),p=h.exports,f={name:"TrashView",components:{SimpleCard:p},watch:{filterText:function(){this.pageNumber=0}},computed:{projects:function(){return this.$store.state.projects.filter(function(e){return!0===e.deleted})},streams:function(){return this.$store.state.streams.filter(function(e){return!0===e.deleted})},allResources:function(){var e=this;return[].concat(Object(c["a"])(this.streams),Object(c["a"])(this.projects)).filter(function(t){return t.owner===e.$store.state.user._id}).sort(function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})},allResourcesFiltered:function(){var e=this;return""===this.filterText||null===this.filterText?this.allResources:this.allResources.filter(function(t){return!t.name||t.name.toLowerCase().includes(e.filterText.toLowerCase())}).sort(function(e,t){return e.updatedAt>t.updatedAt})},allResourcesPaginated:function(){return this.allResourcesFiltered.slice(this.currentIndex+this.pageNumber*this.sliceSize,this.sliceSize*(this.pageNumber+1))}},data:function(){return{filterText:"",currentIndex:0,sliceSize:6,pageNumber:0,selectedResources:[]}},methods:{deleteForever:function(e){e.streamId?this.$store.dispatch("deleteStream",{streamId:e.streamId}):this.$store.dispatch("deleteProject",{_id:e._id})},deleteAllSelected:function(){var e=!0,t=!1,r=void 0;try{for(var s,i=a()(this.selectedResources);!(e=(s=i.next()).done);e=!0){var n=s.value;n.streamId?this.$store.dispatch("deleteStream",{streamId:n.streamId}):this.$store.dispatch("deleteProject",{_id:n._id})}}catch(c){t=!0,r=c}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}this.clearSelection()},restore:function(e){e.streamId?this.$store.dispatch("updateStream",{streamId:e.streamId,deleted:!1}):this.$store.dispatch("updateProject",{_id:e._id,deleted:!1})},restoreAllSelected:function(){var e=!0,t=!1,r=void 0;try{for(var s,i=a()(this.selectedResources);!(e=(s=i.next()).done);e=!0){var n=s.value;n.streamId?this.$store.dispatch("updateStream",{streamId:n.streamId,deleted:!1}):this.$store.dispatch("updateProject",{_id:n._id,deleted:!1})}}catch(c){t=!0,r=c}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}this.clearSelection()},clearSelection:function(){this.selectedResources.forEach(function(e){bus.$emit("unselect-all-resources")})},selectAll:function(){var e=this;this.allResourcesPaginated.forEach(function(t){var r=e.selectedResources.findIndex(function(e){return e._id===t._id});-1===r&&bus.$emit("select-resource",t._id)})},selectThis:function(e){var t=this.selectedResources.findIndex(function(t){return t._id===e._id});-1===t?this.selectedResources.unshift(e):this.selectedResources.splice(t,1)}},created:function(){}},m=f,_=Object(v["a"])(m,s,i,!1,null,"4771c0d0",null);t["default"]=_.exports}}]);
//# sourceMappingURL=chunk-2d0b3630.dd5f6c9b.js.map