(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2138f6"],{acca:function(t,r,s){"use strict";s.r(r);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"grid-list-xl":""}},[e.selectedProjects.length>0?r("v-toolbar",{staticStyle:{"z-index":"100"},attrs:{fixed:""}},[r("v-toolbar-items",[r("v-btn",{staticClass:"md-raised md-dense md-primary",attrs:{icon:"",color:"primary"},nativeOn:{click:function(t){return e.clearSelection(t)}}},[r("v-icon",[e._v("close")])],1),r("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){return e.selectAll()}}},[e._v("select all")])],1),r("v-spacer"),r("v-toolbar-items",[r("v-btn",{attrs:{flat:"",color:"error"},nativeOn:{click:function(t){return e.deleteSelectedProjects(t)}}},[e._v("Archive")])],1)],1):e._e(),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{staticClass:"headline font-weight-light",attrs:{xs12:"","py-5":""}},[e._v("\n      Projects allow you to share streams with a team.\n    ")]),0===e.projects.length?r("v-flex",{attrs:{xs12:""}},[r("p",{staticClass:"title font-weight-light"},[e._v("\n        ðŸ‘‹ Hello "+e._s(e.$store.state.user.name)+"! It looks like you haven't created any projects yet. Don't forget to check out the "),r("a",{attrs:{href:"https://speckle.systems/docs/web/management",target:"_blank"}},[e._v("guide")]),e._v("!\n      ")])]):e._e(),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{solo:"",clearable:"",label:"Search for a project","prepend-inner-icon":"search",spellcheck:"false",loading:e.isSearching,"append-icon":"refresh"},on:{input:e.updateSearch,"click:append":function(t){return e.$store.dispatch("getProjects")}},model:{value:e.searchfilter,callback:function(t){e.searchfilter=t},expression:"searchfilter"}}),e.searchfilter&&""!==e.searchfilter?r("div",[r("p",{staticClass:"title font-weight-light my-3 mx-1"},[e._v("Found "+e._s(e.filteredProjects.length)+" project"+e._s(1===e.filteredProjects.length?"":"s")+" matching your search criteria.")])]):e._e(),r("v-expansion-panel",[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Search Options")]},proxy:!0}])},[r("v-card",{staticClass:"pa-3"},[r("v-expansion-panel",[r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Tags")]},proxy:!0}])},[r("v-card",{staticClass:"pa-3"},e._l(e.allTags,function(t){return r("v-chip",{key:t,attrs:{small:"",dense:""},on:{click:function(r){return e.addSearchQuery("tag",t)}}},[e._v("\n                    "+e._s(t)+"\n                  ")])}),1)],1),r("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Job Numbers")]},proxy:!0}])},[r("v-card",{staticClass:"pa-3"},e._l(e.allJobNumbers,function(t){return r("v-chip",{key:t,on:{click:function(r){return e.addSearchQuery("jn",t)}}},[e._v(e._s(t))])}),1)],1)],1)],1)],1)],1)],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{icon:"",small:"",disabled:0===e.pageNumber},nativeOn:{click:function(t){e.pageNumber=0}}},[r("v-icon",[e._v("first_page")])],1),r("v-btn",{attrs:{icon:"",small:"",disabled:0===e.pageNumber},nativeOn:{click:function(t){e.pageNumber-=1}}},[r("v-icon",[e._v("chevron_left")])],1),r("v-btn",{attrs:{icon:"",disabled:e.pageNumber>=Math.round(e.filteredProjects.length/e.sliceSize)},nativeOn:{click:function(t){e.pageNumber+=1}}},[r("v-icon",[e._v("chevron_right")])],1),r("v-btn",{attrs:{icon:"",small:"",disabled:e.pageNumber>=Math.round(e.filteredProjects.length/e.sliceSize)},nativeOn:{click:function(t){e.pageNumber=Math.round(e.filteredProjects.length/e.sliceSize)}}},[r("v-icon",[e._v("last_page")])],1),r("span",{staticClass:"caption",attrs:{xxxstyle:"position: relative;top:8px;"}},[e._v(e._s(e.pageNumber)+" / "+e._s((e.filteredProjects.length/e.sliceSize).toFixed(0)))])],1),e._l(e.paginatedProjects,function(t){return r("v-flex",{key:t._id,attrs:{xs12:"",sm6:""}},[r("project-card",{attrs:{resource:t},on:{selected:e.selectThis,deleted:e.clearSelection}})],1)}),r("v-flex",{attrs:{xs12:""}},[r("v-btn",{attrs:{icon:"",small:"",disabled:0===e.pageNumber},nativeOn:{click:function(t){e.pageNumber=0}}},[r("v-icon",[e._v("first_page")])],1),r("v-btn",{attrs:{icon:"",small:"",disabled:0===e.pageNumber},nativeOn:{click:function(t){e.pageNumber-=1}}},[r("v-icon",[e._v("chevron_left")])],1),r("v-btn",{attrs:{icon:"",disabled:e.pageNumber>=Math.round(e.filteredProjects.length/e.sliceSize)},nativeOn:{click:function(t){e.pageNumber+=1}}},[r("v-icon",[e._v("chevron_right")])],1),r("v-btn",{attrs:{icon:"",small:"",disabled:e.pageNumber>=Math.round(e.filteredProjects.length/e.sliceSize)},nativeOn:{click:function(t){e.pageNumber=Math.round(e.filteredProjects.length/e.sliceSize)}}},[r("v-icon",[e._v("last_page")])],1),r("span",{staticClass:"caption",attrs:{xxxstyle:"position: relative;top:8px;"}},[e._v(e._s(e.pageNumber)+" / "+e._s((e.filteredProjects.length/e.sliceSize).toFixed(0)))])],1)],2),r("v-btn",{attrs:{color:"primary",dark:"",fixed:"",large:"",bottom:"",right:"",fab:""},nativeOn:{click:function(t){return e.createProject(t)}}},[r("v-icon",[e._v("add")])],1)],1)},i=[],c=(s("ac6a"),s("20d6"),s("6762"),s("2fdb"),s("28a5"),s("f7fe")),a=s.n(c),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{class:{"elevation-10":e.selected,"elevation-1":!0}},[r("v-card-title",[r("span",{staticClass:"title font-weight-light"},[e._v(e._s(e.resource.name?e.resource.name:"No Name"))]),r("v-spacer"),r("span"),r("span",[r("v-checkbox",{attrs:{color:"primary"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),r("v-divider",{staticClass:"mx-0 my-0"}),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{staticClass:"caption",attrs:{xs12:"","ma-2":""}},[r("v-icon",{attrs:{small:""}},[e._v("import_export")]),e._v("Â "),r("strong",{staticStyle:{"user-select":"all"}},[e._v(e._s(e.project.streams.length))]),e._v("Â \n      "),r("v-icon",{attrs:{small:""}},[e._v("person_outline")]),e._v(" "+e._s(e.allUsers.length)+" Â \n      "),r("v-icon",{attrs:{small:""}},[e._v("edit")]),e._v("Â "),r("timeago",{attrs:{datetime:e.resource.updatedAt}}),e._v("Â \n      "),r("v-icon",{attrs:{small:""}},[e._v("access_time")]),e._v("Â  "+e._s(e.createdAt)+"Â \n    ")],1),r("v-flex",{attrs:{xs12:"","ma-2":""}},[e.resource.jobNumber?r("v-chip",{attrs:{small:""}},[r("b",[e._v("JN:")]),e._v(" "+e._s(e.resource.jobNumber))]):e._e(),e._l(e.resource.tags,function(t){return e.resource.tags.length>0?r("v-chip",{key:t,attrs:{small:"",outline:""}},[e._v(e._s(t))]):e._e()})],2),r("v-flex",{attrs:{xs12:"","ma-2":""}},[r("div",{staticClass:"md-caption md-small-hide",domProps:{innerHTML:e._s(e.compiledDescription)}})])],1),r("v-card-actions",[r("span",{staticClass:"caption font-weight-light"},[e._v("Owned by "),r("strong",[e._v(e._s(e.owner))])]),r("v-spacer"),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.isOwner,expression:"isOwner"}],staticClass:"transparent",attrs:{depressed:""},nativeOn:{click:function(t){return e.archiveProject(t)}}},[e._v("Archive")]),r("v-btn",{attrs:{color:"primary",to:"/projects/"+e.resource._id}},[e._v("Details")])],1)],1)},l=[],u=(s("7f7f"),s("7514"),s("c36e"),s("13bb")),d=s.n(u),p=s("0e54"),h=s.n(p),v={name:"ProjectCard",props:{resource:Object},watch:{selected:function(){this.$emit("selected",this.project)}},computed:{project:function(){return this.resource},projectTeamMembers:function(){return d()(this.project.canRead,this.project.canWrite)},createdAt:function(){var e=new Date(this.project.createdAt);return e.toLocaleString("en",{year:"numeric",month:"long",day:"numeric"})},compiledDescription:function(){return h()(this.project.description.substring(0,400)+" ...",{sanitize:!0})},canEdit:function(){return!!this.isOwner||-1!==this.project.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.project.owner===this.$store.state.user._id},allUsers:function(){return d()(this.project.canRead,this.project.canWrite)},owner:function(){var e=this,t=this.$store.state.users.find(function(t){return t._id===e.resource.owner});return t||this.$store.dispatch("getUser",{_id:this.resource.owner}),t?t.surname.includes("is you")?"you":"".concat(t.name," ").concat(t.surname):"Loading"}},data:function(){return{selected:!1}},methods:{archiveProject:function(){this.$store.dispatch("updateProject",{_id:this.project._id,deleted:!0})},updateTags:a()(function(e){this.$store.dispatch("updateProject",{_id:this.project._id,tags:this.project.tags})},1e3)},mounted:function(){var e=this;bus.$on("select-project",function(t){t===e.project._id&&(e.selected=!0)}),bus.$on("unselect-all-projects",function(){e.selected=!1})}},f=v,m=s("2877"),_=Object(m["a"])(f,o,l,!1,null,"51f22e28",null),g=_.exports,b={name:"ProjectsView",components:{ProjectCard:g},computed:{projects:function(){return this.$store.state.projects.filter(function(e){return!1===e.deleted})},filteredProjects:function(){return this.searchfilter&&""!==this.searchfilter?this.$store.getters.filteredResources(this.filters,"projects"):this.projects},paginatedProjects:function(){return this.filteredProjects.slice(this.currentIndex+this.pageNumber*this.sliceSize,this.sliceSize*(this.pageNumber+1))},allTags:function(){return this.$store.getters.allProjectTags},allJobNumbers:function(){return this.$store.getters.allJobNumbersProjects}},data:function(){return{currentIndex:0,sliceSize:6,pageNumber:0,searchfilter:"",selectedProjects:[],isSearching:!1,filters:[]}},methods:{addSearchQuery:function(t,r){var s=this;this.pageNumber=0;var n="".concat(t,":").concat(r);this.searchfilter=n,setTimeout(function(){s.isSearching=!1},50);try{var i=n.split(" ").map(function(e){return e.includes(":")?{key:e.split(":")[0],value:e.split(":")[1]}:e.includes("public")||e.includes("private")||e.includes("mine")||e.includes("shared")?{key:e,value:null}:{key:"name",value:e}});this.filters=i}catch(c){this.filters=[{key:"name",value:e}]}this.isSearching=!1},selectThis:function(e){var t=this.selectedProjects.findIndex(function(t){return t._id===e._id});-1===t?this.selectedProjects.unshift(e):this.selectedProjects.splice(t,1)},selectAll:function(){var e=this;this.paginatedProjects.forEach(function(t){var r=e.selectedProjects.findIndex(function(e){return e._id===t._id});-1===r&&bus.$emit("select-project",t._id)})},createProject:function(){var e=this;this.$store.dispatch("createProject",{name:"A brand new speckle project"}).then(function(t){e.$router.push("/projects/".concat(t._id))})},deleteSelectedProjects:function(){var e=this;this.selectedProjects.forEach(function(t){e.$store.dispatch("updateProject",{_id:t._id,deleted:!0})}),this.clearSelection()},clearSelection:function(){bus.$emit("unselect-all-projects")},updateSearch:a()(function(e){this.pageNumber=0,this.isSearching=!1,this.searchfilter=e,this.searchfilter=e;try{var t=this.searchfilter.split(" ").map(function(e){return e.includes(":")?{key:e.split(":")[0],value:e.split(":")[1]}:e.includes("public")||e.includes("private")||e.includes("mine")||e.includes("shared")?{key:e,value:null}:{key:"name",value:e}});this.filters=t}catch(r){this.filters=[{key:"name",value:e}]}},1e3)},created:function(){}},j=b,x=Object(m["a"])(j,n,i,!1,null,"507f6c73",null);r["default"]=x.exports}}]);
//# sourceMappingURL=chunk-2d2138f6.67ca68b9.js.map